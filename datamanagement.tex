\documentclass[11pt]{article}

    \usepackage[breakable]{tcolorbox}
    \usepackage{parskip} % Stop auto-indenting (to mimic markdown behaviour)
    
    \usepackage{iftex}
    \ifPDFTeX
    	\usepackage[T1]{fontenc}
    	\usepackage{mathpazo}
    \else
    	\usepackage{fontspec}
    \fi

    % Basic figure setup, for now with no caption control since it's done
    % automatically by Pandoc (which extracts ![](path) syntax from Markdown).
    \usepackage{graphicx}
    % Maintain compatibility with old templates. Remove in nbconvert 6.0
    \let\Oldincludegraphics\includegraphics
    % Ensure that by default, figures have no caption (until we provide a
    % proper Figure object with a Caption API and a way to capture that
    % in the conversion process - todo).
    \usepackage{caption}
    \DeclareCaptionFormat{nocaption}{}
    \captionsetup{format=nocaption,aboveskip=0pt,belowskip=0pt}

    \usepackage{float}
    \floatplacement{figure}{H} % forces figures to be placed at the correct location
    \usepackage{xcolor} % Allow colors to be defined
    \usepackage{enumerate} % Needed for markdown enumerations to work
    \usepackage{geometry} % Used to adjust the document margins
    \usepackage{amsmath} % Equations
    \usepackage{amssymb} % Equations
    \usepackage{textcomp} % defines textquotesingle
    % Hack from http://tex.stackexchange.com/a/47451/13684:
    \AtBeginDocument{%
        \def\PYZsq{\textquotesingle}% Upright quotes in Pygmentized code
    }
    \usepackage{upquote} % Upright quotes for verbatim code
    \usepackage{eurosym} % defines \euro
    \usepackage[mathletters]{ucs} % Extended unicode (utf-8) support
    \usepackage{fancyvrb} % verbatim replacement that allows latex
    \usepackage{grffile} % extends the file name processing of package graphics 
                         % to support a larger range
    \makeatletter % fix for old versions of grffile with XeLaTeX
    \@ifpackagelater{grffile}{2019/11/01}
    {
      % Do nothing on new versions
    }
    {
      \def\Gread@@xetex#1{%
        \IfFileExists{"\Gin@base".bb}%
        {\Gread@eps{\Gin@base.bb}}%
        {\Gread@@xetex@aux#1}%
      }
    }
    \makeatother
    \usepackage[Export]{adjustbox} % Used to constrain images to a maximum size
    \adjustboxset{max size={0.9\linewidth}{0.9\paperheight}}

    % The hyperref package gives us a pdf with properly built
    % internal navigation ('pdf bookmarks' for the table of contents,
    % internal cross-reference links, web links for URLs, etc.)
    \usepackage{hyperref}
    % The default LaTeX title has an obnoxious amount of whitespace. By default,
    % titling removes some of it. It also provides customization options.
    \usepackage{titling}
    \usepackage{longtable} % longtable support required by pandoc >1.10
    \usepackage{booktabs}  % table support for pandoc > 1.12.2
    \usepackage[inline]{enumitem} % IRkernel/repr support (it uses the enumerate* environment)
    \usepackage[normalem]{ulem} % ulem is needed to support strikethroughs (\sout)
                                % normalem makes italics be italics, not underlines
    \usepackage{mathrsfs}
    

    
    % Colors for the hyperref package
    \definecolor{urlcolor}{rgb}{0,.145,.698}
    \definecolor{linkcolor}{rgb}{.71,0.21,0.01}
    \definecolor{citecolor}{rgb}{.12,.54,.11}

    % ANSI colors
    \definecolor{ansi-black}{HTML}{3E424D}
    \definecolor{ansi-black-intense}{HTML}{282C36}
    \definecolor{ansi-red}{HTML}{E75C58}
    \definecolor{ansi-red-intense}{HTML}{B22B31}
    \definecolor{ansi-green}{HTML}{00A250}
    \definecolor{ansi-green-intense}{HTML}{007427}
    \definecolor{ansi-yellow}{HTML}{DDB62B}
    \definecolor{ansi-yellow-intense}{HTML}{B27D12}
    \definecolor{ansi-blue}{HTML}{208FFB}
    \definecolor{ansi-blue-intense}{HTML}{0065CA}
    \definecolor{ansi-magenta}{HTML}{D160C4}
    \definecolor{ansi-magenta-intense}{HTML}{A03196}
    \definecolor{ansi-cyan}{HTML}{60C6C8}
    \definecolor{ansi-cyan-intense}{HTML}{258F8F}
    \definecolor{ansi-white}{HTML}{C5C1B4}
    \definecolor{ansi-white-intense}{HTML}{A1A6B2}
    \definecolor{ansi-default-inverse-fg}{HTML}{FFFFFF}
    \definecolor{ansi-default-inverse-bg}{HTML}{000000}

    % common color for the border for error outputs.
    \definecolor{outerrorbackground}{HTML}{FFDFDF}

    % commands and environments needed by pandoc snippets
    % extracted from the output of `pandoc -s`
    \providecommand{\tightlist}{%
      \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
    \DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
    % Add ',fontsize=\small' for more characters per line
    \newenvironment{Shaded}{}{}
    \newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.56,0.13,0.00}{{#1}}}
    \newcommand{\DecValTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\FloatTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\CharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\StringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\CommentTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textit{{#1}}}}
    \newcommand{\OtherTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{{#1}}}
    \newcommand{\AlertTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.02,0.16,0.49}{{#1}}}
    \newcommand{\RegionMarkerTok}[1]{{#1}}
    \newcommand{\ErrorTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\NormalTok}[1]{{#1}}
    
    % Additional commands for more recent versions of Pandoc
    \newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.53,0.00,0.00}{{#1}}}
    \newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.73,0.40,0.53}{{#1}}}
    \newcommand{\ImportTok}[1]{{#1}}
    \newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.73,0.13,0.13}{\textit{{#1}}}}
    \newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\VariableTok}[1]{\textcolor[rgb]{0.10,0.09,0.49}{{#1}}}
    \newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.40,0.40,0.40}{{#1}}}
    \newcommand{\BuiltInTok}[1]{{#1}}
    \newcommand{\ExtensionTok}[1]{{#1}}
    \newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.74,0.48,0.00}{{#1}}}
    \newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.49,0.56,0.16}{{#1}}}
    \newcommand{\InformationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\WarningTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    
    
    % Define a nice break command that doesn't care if a line doesn't already
    % exist.
    \def\br{\hspace*{\fill} \\* }
    % Math Jax compatibility definitions
    \def\gt{>}
    \def\lt{<}
    \let\Oldtex\TeX
    \let\Oldlatex\LaTeX
    \renewcommand{\TeX}{\textrm{\Oldtex}}
    \renewcommand{\LaTeX}{\textrm{\Oldlatex}}
    % Document parameters
    % Document title
    \title{datamanagement}
    
    
    
    
    
% Pygments definitions
\makeatletter
\def\PY@reset{\let\PY@it=\relax \let\PY@bf=\relax%
    \let\PY@ul=\relax \let\PY@tc=\relax%
    \let\PY@bc=\relax \let\PY@ff=\relax}
\def\PY@tok#1{\csname PY@tok@#1\endcsname}
\def\PY@toks#1+{\ifx\relax#1\empty\else%
    \PY@tok{#1}\expandafter\PY@toks\fi}
\def\PY@do#1{\PY@bc{\PY@tc{\PY@ul{%
    \PY@it{\PY@bf{\PY@ff{#1}}}}}}}
\def\PY#1#2{\PY@reset\PY@toks#1+\relax+\PY@do{#2}}

\expandafter\def\csname PY@tok@w\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.73,0.73}{##1}}}
\expandafter\def\csname PY@tok@c\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.74,0.48,0.00}{##1}}}
\expandafter\def\csname PY@tok@k\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kt\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.69,0.00,0.25}{##1}}}
\expandafter\def\csname PY@tok@o\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@ow\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\expandafter\def\csname PY@tok@nb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@nf\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@nc\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@nn\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@ne\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.82,0.25,0.23}{##1}}}
\expandafter\def\csname PY@tok@nv\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@no\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.53,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@nl\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.63,0.63,0.00}{##1}}}
\expandafter\def\csname PY@tok@ni\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.60,0.60,0.60}{##1}}}
\expandafter\def\csname PY@tok@na\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.49,0.56,0.16}{##1}}}
\expandafter\def\csname PY@tok@nt\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@nd\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\expandafter\def\csname PY@tok@s\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sd\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@si\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.53}{##1}}}
\expandafter\def\csname PY@tok@se\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.13}{##1}}}
\expandafter\def\csname PY@tok@sr\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.53}{##1}}}
\expandafter\def\csname PY@tok@ss\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@sx\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@m\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@gh\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@gu\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.50,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@gd\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.63,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@gi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.63,0.00}{##1}}}
\expandafter\def\csname PY@tok@gr\endcsname{\def\PY@tc##1{\textcolor[rgb]{1.00,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@ge\endcsname{\let\PY@it=\textit}
\expandafter\def\csname PY@tok@gs\endcsname{\let\PY@bf=\textbf}
\expandafter\def\csname PY@tok@gp\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@go\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.53,0.53,0.53}{##1}}}
\expandafter\def\csname PY@tok@gt\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.27,0.87}{##1}}}
\expandafter\def\csname PY@tok@err\endcsname{\def\PY@bc##1{\setlength{\fboxsep}{0pt}\fcolorbox[rgb]{1.00,0.00,0.00}{1,1,1}{\strut ##1}}}
\expandafter\def\csname PY@tok@kc\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kd\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kn\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kr\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@bp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@fm\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@vc\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@vg\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@vi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@vm\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@sa\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sc\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@dl\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@s2\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sh\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@s1\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@mb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mf\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mh\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@il\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mo\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@ch\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cm\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cpf\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@c1\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cs\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}

\def\PYZbs{\char`\\}
\def\PYZus{\char`\_}
\def\PYZob{\char`\{}
\def\PYZcb{\char`\}}
\def\PYZca{\char`\^}
\def\PYZam{\char`\&}
\def\PYZlt{\char`\<}
\def\PYZgt{\char`\>}
\def\PYZsh{\char`\#}
\def\PYZpc{\char`\%}
\def\PYZdl{\char`\$}
\def\PYZhy{\char`\-}
\def\PYZsq{\char`\'}
\def\PYZdq{\char`\"}
\def\PYZti{\char`\~}
% for compatibility with earlier versions
\def\PYZat{@}
\def\PYZlb{[}
\def\PYZrb{]}
\makeatother


    % For linebreaks inside Verbatim environment from package fancyvrb. 
    \makeatletter
        \newbox\Wrappedcontinuationbox 
        \newbox\Wrappedvisiblespacebox 
        \newcommand*\Wrappedvisiblespace {\textcolor{red}{\textvisiblespace}} 
        \newcommand*\Wrappedcontinuationsymbol {\textcolor{red}{\llap{\tiny$\m@th\hookrightarrow$}}} 
        \newcommand*\Wrappedcontinuationindent {3ex } 
        \newcommand*\Wrappedafterbreak {\kern\Wrappedcontinuationindent\copy\Wrappedcontinuationbox} 
        % Take advantage of the already applied Pygments mark-up to insert 
        % potential linebreaks for TeX processing. 
        %        {, <, #, %, $, ' and ": go to next line. 
        %        _, }, ^, &, >, - and ~: stay at end of broken line. 
        % Use of \textquotesingle for straight quote. 
        \newcommand*\Wrappedbreaksatspecials {% 
            \def\PYGZus{\discretionary{\char`\_}{\Wrappedafterbreak}{\char`\_}}% 
            \def\PYGZob{\discretionary{}{\Wrappedafterbreak\char`\{}{\char`\{}}% 
            \def\PYGZcb{\discretionary{\char`\}}{\Wrappedafterbreak}{\char`\}}}% 
            \def\PYGZca{\discretionary{\char`\^}{\Wrappedafterbreak}{\char`\^}}% 
            \def\PYGZam{\discretionary{\char`\&}{\Wrappedafterbreak}{\char`\&}}% 
            \def\PYGZlt{\discretionary{}{\Wrappedafterbreak\char`\<}{\char`\<}}% 
            \def\PYGZgt{\discretionary{\char`\>}{\Wrappedafterbreak}{\char`\>}}% 
            \def\PYGZsh{\discretionary{}{\Wrappedafterbreak\char`\#}{\char`\#}}% 
            \def\PYGZpc{\discretionary{}{\Wrappedafterbreak\char`\%}{\char`\%}}% 
            \def\PYGZdl{\discretionary{}{\Wrappedafterbreak\char`\$}{\char`\$}}% 
            \def\PYGZhy{\discretionary{\char`\-}{\Wrappedafterbreak}{\char`\-}}% 
            \def\PYGZsq{\discretionary{}{\Wrappedafterbreak\textquotesingle}{\textquotesingle}}% 
            \def\PYGZdq{\discretionary{}{\Wrappedafterbreak\char`\"}{\char`\"}}% 
            \def\PYGZti{\discretionary{\char`\~}{\Wrappedafterbreak}{\char`\~}}% 
        } 
        % Some characters . , ; ? ! / are not pygmentized. 
        % This macro makes them "active" and they will insert potential linebreaks 
        \newcommand*\Wrappedbreaksatpunct {% 
            \lccode`\~`\.\lowercase{\def~}{\discretionary{\hbox{\char`\.}}{\Wrappedafterbreak}{\hbox{\char`\.}}}% 
            \lccode`\~`\,\lowercase{\def~}{\discretionary{\hbox{\char`\,}}{\Wrappedafterbreak}{\hbox{\char`\,}}}% 
            \lccode`\~`\;\lowercase{\def~}{\discretionary{\hbox{\char`\;}}{\Wrappedafterbreak}{\hbox{\char`\;}}}% 
            \lccode`\~`\:\lowercase{\def~}{\discretionary{\hbox{\char`\:}}{\Wrappedafterbreak}{\hbox{\char`\:}}}% 
            \lccode`\~`\?\lowercase{\def~}{\discretionary{\hbox{\char`\?}}{\Wrappedafterbreak}{\hbox{\char`\?}}}% 
            \lccode`\~`\!\lowercase{\def~}{\discretionary{\hbox{\char`\!}}{\Wrappedafterbreak}{\hbox{\char`\!}}}% 
            \lccode`\~`\/\lowercase{\def~}{\discretionary{\hbox{\char`\/}}{\Wrappedafterbreak}{\hbox{\char`\/}}}% 
            \catcode`\.\active
            \catcode`\,\active 
            \catcode`\;\active
            \catcode`\:\active
            \catcode`\?\active
            \catcode`\!\active
            \catcode`\/\active 
            \lccode`\~`\~ 	
        }
    \makeatother

    \let\OriginalVerbatim=\Verbatim
    \makeatletter
    \renewcommand{\Verbatim}[1][1]{%
        %\parskip\z@skip
        \sbox\Wrappedcontinuationbox {\Wrappedcontinuationsymbol}%
        \sbox\Wrappedvisiblespacebox {\FV@SetupFont\Wrappedvisiblespace}%
        \def\FancyVerbFormatLine ##1{\hsize\linewidth
            \vtop{\raggedright\hyphenpenalty\z@\exhyphenpenalty\z@
                \doublehyphendemerits\z@\finalhyphendemerits\z@
                \strut ##1\strut}%
        }%
        % If the linebreak is at a space, the latter will be displayed as visible
        % space at end of first line, and a continuation symbol starts next line.
        % Stretch/shrink are however usually zero for typewriter font.
        \def\FV@Space {%
            \nobreak\hskip\z@ plus\fontdimen3\font minus\fontdimen4\font
            \discretionary{\copy\Wrappedvisiblespacebox}{\Wrappedafterbreak}
            {\kern\fontdimen2\font}%
        }%
        
        % Allow breaks at special characters using \PYG... macros.
        \Wrappedbreaksatspecials
        % Breaks at punctuation characters . , ; ? ! and / need catcode=\active 	
        \OriginalVerbatim[#1,codes*=\Wrappedbreaksatpunct]%
    }
    \makeatother

    % Exact colors from NB
    \definecolor{incolor}{HTML}{303F9F}
    \definecolor{outcolor}{HTML}{D84315}
    \definecolor{cellborder}{HTML}{CFCFCF}
    \definecolor{cellbackground}{HTML}{F7F7F7}
    
    % prompt
    \makeatletter
    \newcommand{\boxspacing}{\kern\kvtcb@left@rule\kern\kvtcb@boxsep}
    \makeatother
    \newcommand{\prompt}[4]{
        {\ttfamily\llap{{\color{#2}[#3]:\hspace{3pt}#4}}\vspace{-\baselineskip}}
    }
    

    
    % Prevent overflowing lines due to hard-to-break entities
    \sloppy 
    % Setup hyperref package
    \hypersetup{
      breaklinks=true,  % so long urls are correctly broken across lines
      colorlinks=true,
      urlcolor=urlcolor,
      linkcolor=linkcolor,
      citecolor=citecolor,
      }
    % Slightly bigger margins than the latex defaults
    
    \geometry{verbose,tmargin=1in,bmargin=1in,lmargin=1in,rmargin=1in}
    
    

\begin{document}
    
    \maketitle
    
    

    
    \hypertarget{final-assignment-of-management-and-analysis-of-physics-datasets--part-2}{%
\section{Final assignment of ``Management and Analysis of Physics
Datasets''- Part
2}\label{final-assignment-of-management-and-analysis-of-physics-datasets--part-2}}

    \hypertarget{gerardo-carmona}{%
\paragraph{Gerardo Carmona}\label{gerardo-carmona}}

\hypertarget{saverio-monaco}{%
\paragraph{Saverio Monaco}\label{saverio-monaco}}

    \hypertarget{fun-exercise}{%
\subsection{Fun Exercise}\label{fun-exercise}}

You might have seen this kind of puzzles on social media. It should be
straight-forward for you to understand which operations connect the two
numbers before the `=' sign. What is the result of the
\(\boldsymbol{?}\) field? Show proof for each line!

\begin{align*}& 1 + 2 = 3 \\ & 2 + 5 = 7 \\ & 3 + 7 = 4 \\ & 4 + 5 = \space\boldsymbol{?} \\ & 5 + 9 = 12\end{align*}

    \hypertarget{solution}{%
\paragraph{SOLUTION}\label{solution}}

If we rewrite the digits as binary, we can easily guess the actual
operation: 
\begin{align*}
1 + 2 &= 3&&: &&f(01,10)&& &&=11\\
2 + 5 &= 7&&: &&f(010,101)&& &&=111\\
3 + 7 &= 4&&: &&f(011,111)&& &&=100\\
4 + 5 &=\ ?&&: &&f(100,101)&& &&=\ ?\\
5 + 9 &= 12&&: &&f(0101,1001)&& &&=1100
\end{align*}


For all expression, we can replace \(f(a,b)\) with \(a\oplus b\), thus
obtaining \(100\oplus 101 = 001 = 1\) for ``\(4+5\)''.

    \hypertarget{redundancy}{%
\subsection{1 Redundancy}\label{redundancy}}

We are programming a file based RAID-4 software algorithm. For this
purpose we are converting a single input (\textbf{raid4.input}) file
into four data files \texttt{raid4.0,raid4.1,raid4.2,raid4.3} and one
parity file \texttt{raid4.4} - the four data and one parity file we call
`stripe files'.

The input file can be downloaded from:
http://apeters.web.cern.ch/apeters/pd2021/raid4.input

To do this we are reading in a loop sequentially blocks of four bytes
from the input file until the whole file is read: * in each loop we
write one of the four read bytes round-robin to each data file, compute
the parity of the four input bytes and write the result into the fifth
parity file. ( see the drawing for better understanding )

\begin{itemize}
\tightlist
\item
  we continue until all input data has been read. If the last bytes read
  from the input file are not filling four bytes, we consider the
  missing bytes as zero for the parity computation.
\end{itemize}

\hypertarget{input-file-horizontal}{%
\paragraph{Input File (horizontal)}\label{input-file-horizontal}}

\textbf{raid4.input - total size 170619 bytes} (number in cell = byte
offset in file)

\begin{longtable}[]{@{}llllllllllllllll@{}}
\toprule
0 & 1 & 2 & 3 & 4 & 5 & 6 & 7 & 8 & 9 & 10 & 11 & 12 & \ldots{} &
\ldots{} & 170618\tabularnewline
\midrule
\endhead
\bottomrule
\end{longtable}

\hypertarget{output-file-vertical}{%
\paragraph{Output File (vertical)}\label{output-file-vertical}}

(number in cell = byte offset in file, p0,1,2\ldots{} are the row-wise
parities)

\begin{longtable}[]{@{}lllll@{}}
\toprule
raid4.0 & raid4.1 & raid4.2 & raid4.3 & raid4.4\tabularnewline
\midrule
\endhead
0 & 1 & 2 & 3 & p0\tabularnewline
4 & 5 & 6 & 7 & p1\tabularnewline
8 & 9 & 10 & 11 & p2\tabularnewline
12 & 13 & 14 & 15 & p3\tabularnewline
\ldots{} & \ldots{} & \ldots{} & \ldots{} & \ldots{}\tabularnewline
\bottomrule
\end{longtable}

\hypertarget{stripe-parity}{%
\paragraph{Stripe parity}\label{stripe-parity}}

(column wise parity)

\begin{longtable}[]{@{}lllll@{}}
\toprule
q0=0\textsuperscript{4}8\^{}12 & q1 & q2 & q3 & q4\tabularnewline
\midrule
\endhead
\bottomrule
\end{longtable}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{1}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k+kn}{import} \PY{n+nn}{numpy} \PY{k}{as} \PY{n+nn}{np}

\PY{k}{def} \PY{n+nf}{get\PYZus{}arr}\PY{p}{(}\PY{n}{path}\PY{p}{)}\PY{p}{:}
    \PY{l+s+sd}{\PYZsq{}\PYZsq{}\PYZsq{}Reads a file as bytes\PYZsq{}\PYZsq{}\PYZsq{}}
    \PY{k}{with} \PY{n+nb}{open}\PY{p}{(}\PY{n}{path}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{r+b}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)} \PY{k}{as} \PY{n}{file}\PY{p}{:}
        \PY{n}{v} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{frombuffer}\PY{p}{(}\PY{n}{file}\PY{o}{.}\PY{n}{read}\PY{p}{(}\PY{p}{)}\PY{p}{,}\PY{n}{dtype} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{uint8}\PY{p}{)}
    \PY{k}{return} \PY{n}{v}


\PY{k}{def} \PY{n+nf}{post\PYZus{}arr}\PY{p}{(}\PY{n}{arr}\PY{p}{,} \PY{n}{path}\PY{p}{)}\PY{p}{:}
    \PY{l+s+sd}{\PYZsq{}\PYZsq{}\PYZsq{}Writes an array to a file, converting it to bytes\PYZsq{}\PYZsq{}\PYZsq{}}
    \PY{k}{with} \PY{n+nb}{open}\PY{p}{(}\PY{n}{path}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{w+b}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)} \PY{k}{as} \PY{n}{file}\PY{p}{:}
        \PY{n}{file}\PY{o}{.}\PY{n}{write}\PY{p}{(}\PY{n}{arr}\PY{o}{.}\PY{n}{tobytes}\PY{p}{(}\PY{p}{)}\PY{p}{)}
    \PY{k}{return}


\PY{k}{def} \PY{n+nf}{xor\PYZus{}arr}\PY{p}{(}\PY{n}{matrix}\PY{p}{)}\PY{p}{:}
    \PY{l+s+sd}{\PYZsq{}\PYZsq{}\PYZsq{}Applies the bitwise xor function to a collection of arrays, given as rows in a matrix.\PYZsq{}\PYZsq{}\PYZsq{}}
    \PY{c+c1}{\PYZsh{} Neutral xor array}
    \PY{n}{v} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{zeros}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{matrix}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}\PY{p}{,}\PY{n}{dtype} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{uint8}\PY{p}{)}
    \PY{c+c1}{\PYZsh{} Applying bitwise\PYZus{}xor between the matrix rows}
    \PY{k}{for} \PY{n}{arr} \PY{o+ow}{in} \PY{n}{matrix}\PY{p}{:}
        \PY{n}{v} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{bitwise\PYZus{}xor}\PY{p}{(}\PY{n}{v}\PY{p}{,}\PY{n}{arr}\PY{p}{)}
    \PY{k}{return} \PY{n}{v}
\end{Verbatim}
\end{tcolorbox}

    \hypertarget{write-a-program-cc-r-or-python-which-produces-four-striped-data-and-one-parity-file-as-described-above-using-the-given-input-file.}{%
\subsubsection{1.1 Write a program (C,C++, R or Python), which produces
four striped data and one parity file as described above using the given
input
file.}\label{write-a-program-cc-r-or-python-which-produces-four-striped-data-and-one-parity-file-as-described-above-using-the-given-input-file.}}

\textbf{hint:} if you have a problem programming this yourself, you can
download the core program in C++ from
http://apeters.web.cern.ch/apeters/pd2021/raid4.cSee the explanations in
the beginning how to compile and run it. You have to add the parity
computations at the IMPLEMENT THIS sections! If you can't compile or run
it, you can still fill in the missing implementation!

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{2}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{n} \PY{o}{=} \PY{l+m+mi}{4}
\PY{n}{src\PYZus{}file} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{raid4.input}\PY{l+s+s1}{\PYZsq{}}
\PY{n}{all\PYZus{}bytes} \PY{o}{=} \PY{n}{get\PYZus{}arr}\PY{p}{(}\PY{n}{src\PYZus{}file}\PY{p}{)}
\PY{n}{all\PYZus{}bytes}

\PY{c+c1}{\PYZsh{} We calculate how many zeros have to be added in the end}
\PY{n}{extra} \PY{o}{=} \PY{n}{n} \PY{o}{\PYZhy{}} \PY{n+nb}{len}\PY{p}{(}\PY{n}{all\PYZus{}bytes}\PY{p}{)}\PY{o}{\PYZpc{}}\PY{k}{n}
\PY{n}{bytes\PYZus{}arr} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{hstack}\PY{p}{(}\PY{p}{[}\PY{n}{all\PYZus{}bytes}\PY{p}{,}\PY{n}{np}\PY{o}{.}\PY{n}{zeros}\PY{p}{(}\PY{n}{extra}\PY{p}{,} \PY{n}{dtype} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{uint8}\PY{p}{)}\PY{p}{]}\PY{p}{)}

\PY{c+c1}{\PYZsh{} Reshaping array}
\PY{n}{nrows} \PY{o}{=} \PY{n+nb}{len}\PY{p}{(}\PY{n}{bytes\PYZus{}arr}\PY{p}{)}\PY{o}{/}\PY{o}{/}\PY{n}{n}
\PY{n}{ncols} \PY{o}{=} \PY{n}{n}
\PY{n}{bytes\PYZus{}arr} \PY{o}{=} \PY{n}{bytes\PYZus{}arr}\PY{o}{.}\PY{n}{reshape}\PY{p}{(}\PY{p}{(}\PY{n}{nrows}\PY{p}{,}\PY{n}{ncols}\PY{p}{)}\PY{p}{)}
\PY{c+c1}{\PYZsh{}\PYZsh{} Rendered as unsigned integers of 8 bits.}
\PY{n}{bytes\PYZus{}arr}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, size=fbox, boxrule=.5pt, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{2}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
array([[ 37,  80,  68,  70],
       [ 45,  49,  46,  51],
       [ 10,  37, 196, 229],
       {\ldots},
       [ 55,  55,  51,  55],
       [ 10,  37,  37,  69],
       [ 79,  70,  10,   0]], dtype=uint8)
\end{Verbatim}
\end{tcolorbox}
        
    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{3}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{c+c1}{\PYZsh{} Iterate over the columns and generate the files}
\PY{k}{for} \PY{n}{i}\PY{p}{,} \PY{n}{v} \PY{o+ow}{in} \PY{n+nb}{enumerate}\PY{p}{(}\PY{n}{bytes\PYZus{}arr}\PY{o}{.}\PY{n}{T}\PY{p}{)}\PY{p}{:}
    \PY{n}{post\PYZus{}arr}\PY{p}{(}\PY{n}{v}\PY{p}{,} \PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{raid}\PY{l+s+si}{\PYZob{}}\PY{n}{n}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{.}\PY{l+s+si}{\PYZob{}}\PY{n}{i}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}

\PY{c+c1}{\PYZsh{} Evaluating parity between stripes}
\PY{n}{row\PYZus{}p} \PY{o}{=} \PY{n}{xor\PYZus{}arr}\PY{p}{(}\PY{n}{bytes\PYZus{}arr}\PY{o}{.}\PY{n}{T}\PY{p}{)}

\PY{c+c1}{\PYZsh{}Store the row parity}
\PY{n}{post\PYZus{}arr}\PY{p}{(}\PY{n}{row\PYZus{}p}\PY{p}{,}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{raid}\PY{l+s+si}{\PYZob{}}\PY{n}{n}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{.}\PY{l+s+si}{\PYZob{}}\PY{n}{n}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{4}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{c+c1}{\PYZsh{}\PYZsh{} Unsigned 8bit integer representation of the parity stripe}
\PY{n}{row\PYZus{}p}\PY{o}{.}\PY{n}{T}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, size=fbox, boxrule=.5pt, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{4}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
array([119,   1,  14, {\ldots},   4,  79,   3], dtype=uint8)
\end{Verbatim}
\end{tcolorbox}
        
    \hypertarget{extend-the-program-to-compute-additionally-the-parity-of-all-bytes-within-one-stripe-file.}{%
\subsubsection{1.2 Extend the program to compute additionally the parity
of all bytes within one stripe
file.}\label{extend-the-program-to-compute-additionally-the-parity-of-all-bytes-within-one-stripe-file.}}

You can say, that the computed column-wise parity acts as a
\emph{corruption check} for each stripe file. Compute the size overhead
by comparing the size of all 5 stripe files with the original file.

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{5}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{c+c1}{\PYZsh{} We end up with five files with the same number of bytes, which is simply the length of the arrays.}
\PY{n}{overhead} \PY{o}{=} \PY{n+nb}{len}\PY{p}{(}\PY{n}{row\PYZus{}p}\PY{p}{)}\PY{o}{*}\PY{l+m+mi}{5}\PY{o}{/}\PY{n+nb}{len}\PY{p}{(}\PY{n}{all\PYZus{}bytes}\PY{p}{)}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}
\PY{n}{overhead} \PY{o}{*}\PY{o}{=} \PY{l+m+mi}{100}
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{The size overhead is }\PY{l+s+si}{\PYZob{}}\PY{n+nb}{round}\PY{p}{(}\PY{n}{overhead}\PY{p}{,}\PY{l+m+mi}{2}\PY{p}{)}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZpc{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
The size overhead is 25.0\%
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{6}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{c+c1}{\PYZsh{} We now wish to generate an extra file with the parity of each column}
\PY{n}{ext\PYZus{}bytes} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{vstack}\PY{p}{(}\PY{p}{(}\PY{n}{bytes\PYZus{}arr}\PY{o}{.}\PY{n}{T}\PY{p}{,} \PY{n}{row\PYZus{}p}\PY{p}{)}\PY{p}{)}\PY{o}{.}\PY{n}{T}

\PY{c+c1}{\PYZsh{} Evaluating parity for each stripe}
\PY{n}{col\PYZus{}p} \PY{o}{=} \PY{n}{xor\PYZus{}arr}\PY{p}{(}\PY{n}{ext\PYZus{}bytes}\PY{p}{)}

\PY{c+c1}{\PYZsh{} Store the resulting parity}
\PY{n}{post\PYZus{}arr}\PY{p}{(}\PY{n}{col\PYZus{}p}\PY{p}{,}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{raid}\PY{l+s+si}{\PYZob{}}\PY{n}{n}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{.col}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \hypertarget{what-is-the-5-byte-parity-value-if-you-write-it-it-in-hexadecimal-format-like-p5-0xq0q1q2q3q4-where-the-qx-are-the-hexadecimal-parity-bytes-computed-by-xor-ing-all-bytes-in-each-stripe-file.}{%
\subsubsection{\texorpdfstring{1.3 What is the 5-byte parity value if
you write it it in hexadecimal format like \(P^5\)
=0x{[}q0{]}{[}q1{]}{[}q2{]}{[}q3{]}{[}q4{]}, where the {[}qx{]} are the
hexadecimal parity bytes computed by xor-ing all bytes in each stripe
file.}{1.3 What is the 5-byte parity value if you write it it in hexadecimal format like P\^{}5 =0x{[}q0{]}{[}q1{]}{[}q2{]}{[}q3{]}{[}q4{]}, where the {[}qx{]} are the hexadecimal parity bytes computed by xor-ing all bytes in each stripe file.}}\label{what-is-the-5-byte-parity-value-if-you-write-it-it-in-hexadecimal-format-like-p5-0xq0q1q2q3q4-where-the-qx-are-the-hexadecimal-parity-bytes-computed-by-xor-ing-all-bytes-in-each-stripe-file.}}

A byte in hexadecimal has two digits and you should add leading 0 if
necessary. Examples: * a byte with contents 1 in hexadecimal is 0x01. A
byte with contents 255in hexadecimal is 0xff. * a possible 5-byte parity
would be P5 = 0 x 01 0c 1a 2f 3e

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{7}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{c+c1}{\PYZsh{} Casting as strings the hexadecimal representation of each byte and setting to a convenient format.}
\PY{n}{p\PYZus{}5} \PY{o}{=} \PY{p}{[}\PY{n+nb}{str}\PY{p}{(}\PY{n}{i}\PY{o}{.}\PY{n}{tobytes}\PY{p}{(}\PY{p}{)}\PY{p}{)}\PY{o}{.}\PY{n}{split}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{x}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{[}\PY{p}{:}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{]} \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n}{col\PYZus{}p}\PY{p}{]}
\PY{n}{p\PYZus{}5} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{0x}\PY{l+s+s1}{\PYZsq{}}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZus{}}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{join}\PY{p}{(}\PY{n}{p\PYZus{}5}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{The 5\PYZhy{}parity in hex format is }\PY{l+s+si}{\PYZob{}}\PY{n}{p\PYZus{}5}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
The 5-parity in hex format is 0xa5\_07\_a0\_9c\_9e
    \end{Verbatim}

    \hypertarget{if-you-create-a-sixth-stripe-file-which-contains-the-row-wise-parities-of-the-five-stripe-files-what-would-be-the-contents-of-this-file}{%
\subsubsection{1.4 If you create a sixth stripe file, which contains the
row-wise parities of the five stripe files, what would be the contents
of this
file?}\label{if-you-create-a-sixth-stripe-file-which-contains-the-row-wise-parities-of-the-five-stripe-files-what-would-be-the-contents-of-this-file}}

    Write down the equation for R, which is the XOR between all data stripes
D0,D1,D2,D3 and the parity P. Remember P was the parity of D0,D1,D2,D3!
Reduce the equation removing P from it to get the answer about the
contents!

    \hypertarget{solution}{%
\paragraph{SOLUTION}\label{solution}}

\begin{align*}
R &= D_0\oplus D_1\oplus D_2\oplus D_3\oplus P\\
&= P\oplus P\\
&= \mathbf{0}
\end{align*}

since \(a\oplus b\) evaluates to \(0\) when \(a\) and \(b\) have the
same value, which is of course the case for every row in the expression
above.

    \hypertarget{after-some-time-you-recompute-the-5-byte-parity-value-as-in-1.3.-now-the-result-is-p5-0x-a5-07-a0-01-9e.-something-has-been-corrupted.-you-want-to-reconstruct-the-original-file-raid4.input-using-the-5-stripe-files.}{%
\subsubsection{\texorpdfstring{1.5 After some time you recompute the
5-byte parity value as in 1.3. Now the result is \(P^5\) = 0x a5 07 a0
01 9e. Something has been corrupted. You want to reconstruct the
original file raid4.input using the 5 stripe
files.}{1.5 After some time you recompute the 5-byte parity value as in 1.3. Now the result is P\^{}5 = 0x a5 07 a0 01 9e. Something has been corrupted. You want to reconstruct the original file raid4.input using the 5 stripe files.}}\label{after-some-time-you-recompute-the-5-byte-parity-value-as-in-1.3.-now-the-result-is-p5-0x-a5-07-a0-01-9e.-something-has-been-corrupted.-you-want-to-reconstruct-the-original-file-raid4.input-using-the-5-stripe-files.}}

Describe how you can recreate the original data file. Which stripe files
do you use and how do you recreate the original data file with the
correct size?

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{8}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{def} \PY{n+nf}{correct}\PY{p}{(}\PY{n}{col\PYZus{}parity}\PY{p}{,} \PY{n}{new\PYZus{}col\PYZus{}parity}\PY{p}{,} \PY{n}{file\PYZus{}key}\PY{p}{)}\PY{p}{:}
    \PY{c+c1}{\PYZsh{} Both col\PYZus{}p and new\PYZus{}col\PYZus{}p are expected as bytes objects}
    \PY{n}{col\PYZus{}p} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{frombuffer}\PY{p}{(}\PY{n+nb}{bytes}\PY{p}{(}\PY{n}{col\PYZus{}parity}\PY{p}{)}\PY{p}{,}\PY{n}{dtype} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{uint8}\PY{p}{)}
    \PY{n}{new\PYZus{}p} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{frombuffer}\PY{p}{(}\PY{n}{new\PYZus{}col\PYZus{}parity}\PY{p}{,}\PY{n}{dtype} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{uint8}\PY{p}{)}
    \PY{n}{mask} \PY{o}{=} \PY{n}{col\PYZus{}p} \PY{o}{!=} \PY{n}{new\PYZus{}p}

    \PY{c+c1}{\PYZsh{} How many parity values have changed?}
    \PY{n}{wrong} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{arange}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{col\PYZus{}p}\PY{p}{)}\PY{p}{)}\PY{p}{[}\PY{n}{mask}\PY{p}{]}
    \PY{n}{right} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{arange}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{col\PYZus{}p}\PY{p}{)}\PY{p}{)}\PY{p}{[}\PY{o}{\PYZti{}}\PY{n}{mask}\PY{p}{]}
    
    \PY{c+c1}{\PYZsh{} We cannot correct if more than one stripe is damaged or no stripe damage was detected.}
    \PY{k}{if} \PY{n+nb}{len}\PY{p}{(}\PY{n}{wrong}\PY{p}{)} \PY{o}{!=} \PY{l+m+mi}{1}\PY{p}{:}
        \PY{n}{message} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{More than one stripe has corrupted elements. Nothing can be done.}\PY{l+s+s1}{\PYZsq{}}\PYZbs{}
            \PY{k}{if} \PY{n}{wrong} \PY{k}{else} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Nothing to correct.}\PY{l+s+s1}{\PYZsq{}}
        \PY{n+nb}{print}\PY{p}{(}\PY{n}{message}\PY{p}{)}
        \PY{k}{return} \PY{k+kc}{None}    

    \PY{c+c1}{\PYZsh{} If only one stripe is damaged then we can proceed to bit correction.}
    \PY{c+c1}{\PYZsh{} Retrieve as an array of row vectors those stripes to be evaluated}
    \PY{n}{w} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{vstack}\PY{p}{(}\PY{p}{[}\PY{n}{get\PYZus{}arr}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+si}{\PYZob{}}\PY{n}{file\PYZus{}key}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{.}\PY{l+s+si}{\PYZob{}}\PY{n}{i}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)} \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n}{right}\PY{p}{]}\PY{p}{)}
    \PY{n}{v} \PY{o}{=} \PY{n}{xor\PYZus{}arr}\PY{p}{(}\PY{n}{w}\PY{p}{)}
    
    \PY{c+c1}{\PYZsh{} Time to correct}
    \PY{p}{[}\PY{n}{j}\PY{p}{]} \PY{o}{=} \PY{n}{wrong}
    \PY{n}{path} \PY{o}{=} \PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+si}{\PYZob{}}\PY{n}{file\PYZus{}key}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{.}\PY{l+s+si}{\PYZob{}}\PY{n}{j}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}
    \PY{n}{post\PYZus{}arr}\PY{p}{(}\PY{n}{v}\PY{p}{,}\PY{n}{path}\PY{p}{)}
    \PY{n+nb}{print}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Successfully rewrote }\PY{l+s+si}{\PYZob{}}\PY{n}{path}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    
    \PY{k}{return} \PY{n}{v}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{9}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{p\PYZus{}5} \PY{o}{=} \PY{l+m+mh}{0xa5\PYZus{}07\PYZus{}a0\PYZus{}01\PYZus{}9e}\PY{o}{.}\PY{n}{to\PYZus{}bytes}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{big}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{p\PYZus{}5}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, size=fbox, boxrule=.5pt, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{9}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
b'\textbackslash{}xa5\textbackslash{}x07\textbackslash{}xa0\textbackslash{}x01\textbackslash{}x9e'
\end{Verbatim}
\end{tcolorbox}
        
    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{10}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{correct}\PY{p}{(}\PY{n+nb}{bytes}\PY{p}{(}\PY{n}{col\PYZus{}p}\PY{p}{)}\PY{p}{,}\PY{n}{p\PYZus{}5}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{raid4}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
Successfully rewrote raid4.3
    \end{Verbatim}

            \begin{tcolorbox}[breakable, size=fbox, boxrule=.5pt, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{10}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
array([ 70,  51, 229, {\ldots},  55,  69,   0], dtype=uint8)
\end{Verbatim}
\end{tcolorbox}
        
    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]

\end{Verbatim}
\end{tcolorbox}

    \hypertarget{cryptography}{%
\subsection{2 Cryptography}\label{cryptography}}

The Caesar cipher is named for Julius Caesar, who used an alphabet where
decrypting would shift three letters to the left. A friend has emailed
you the following text: K{]}amua!trgpy. She told you that her encryption
algorithm works similar to the Caesar cipher: * to each ASCI value of
each letter I add a secret keyvalue. (note that ASCII values range from
0 to 255) * additionally to make it more secure I add a variable (so
called) noncevalue to each ASCII number.

The nonce start value is 5 for the first character of the message. For
each following character add 1 to the nonce of the previous character,
e.g.~for the second letter the nonce added is 6, for the third letter it
is 7 aso.

    \hypertarget{is-this-symmetric-or-asymmetric-encryption-and-explain-why}{%
\subsubsection{2.1 Is this symmetric or asymmetric encryption and
explain
why?}\label{is-this-symmetric-or-asymmetric-encryption-and-explain-why}}

    \hypertarget{solution}{%
\paragraph{SOLUTION}\label{solution}}

Ceasar cipher is a symmetric encryption: the sender and the receiver
only need the public key just containing the information about the
shifts of the characters.

    \hypertarget{write-a-small-brute-force-program-which-tests-keys-from-0..255-and-use-a-dictionary-approach-to-figure-out-the-original-message.}{%
\subsubsection{2.2 Write a small brute force program which tests keys
from 0..255 and use a dictionary approach to figure out the original
message.}\label{write-a-small-brute-force-program-which-tests-keys-from-0..255-and-use-a-dictionary-approach-to-figure-out-the-original-message.}}

In Python you can use the ord() function to get an integer
representation of a character and the chr() to retrieve a character
string from an integer!

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{11}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{c+ch}{\PYZsh{}!pip install pyenchant}
\PY{k+kn}{import} \PY{n+nn}{re}\PY{o}{,} \PY{n+nn}{string}\PY{o}{,} \PY{n+nn}{enchant}
\PY{n}{d} \PY{o}{=} \PY{n}{enchant}\PY{o}{.}\PY{n}{Dict}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{en\PYZus{}US}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{12}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{l+s+sd}{\PYZsq{}\PYZsq{}\PYZsq{}This function will be used in the decrypt method\PYZsq{}\PYZsq{}\PYZsq{}}
\PY{c+c1}{\PYZsh{} If the ASCII character is over 255, it will bring it back between 0 and 255 cycling it}
\PY{c+c1}{\PYZsh{} for example if ord(letter) = 260 it will be transformed to 4}
\PY{c+c1}{\PYZsh{} (assuming the range being from 0 to 255)}
\PY{k}{def} \PY{n+nf}{reshift}\PY{p}{(}\PY{n}{letter}\PY{p}{,}\PY{n}{ascimin}\PY{p}{,}\PY{n}{ascimax}\PY{p}{)}\PY{p}{:}
    \PY{k}{if} \PY{n+nb}{ord}\PY{p}{(}\PY{n}{letter}\PY{p}{)} \PY{o}{\PYZlt{}} \PY{n}{ascimin}\PY{p}{:}
        \PY{k}{return} \PY{n+nb}{chr}\PY{p}{(}\PY{n+nb}{ord}\PY{p}{(}\PY{n}{letter}\PY{p}{)} \PY{o}{\PYZhy{}} \PY{n}{ascimin} \PY{o}{+} \PY{n}{ascimax} \PY{o}{+} \PY{l+m+mi}{1}\PY{p}{)}
    \PY{k}{elif} \PY{n+nb}{ord}\PY{p}{(}\PY{n}{letter}\PY{p}{)} \PY{o}{\PYZgt{}} \PY{n}{ascimax}\PY{p}{:}
        \PY{k}{return} \PY{n+nb}{chr}\PY{p}{(}\PY{o}{\PYZhy{}}\PY{n}{ascimax} \PY{o}{+} \PY{n+nb}{ord}\PY{p}{(}\PY{n}{letter}\PY{p}{)} \PY{o}{+} \PY{n}{ascimin} \PY{o}{\PYZhy{}} \PY{l+m+mi}{1}\PY{p}{)}
    \PY{k}{else}\PY{p}{:}
        \PY{k}{return} \PY{n}{letter}

\PY{l+s+sd}{\PYZsq{}\PYZsq{}\PYZsq{}Decryption function\PYZsq{}\PYZsq{}\PYZsq{}}
\PY{k}{def} \PY{n+nf}{decrypt}\PY{p}{(}\PY{n}{mex}\PY{p}{,}\PY{n}{nonce0}\PY{p}{,}\PY{n}{shift}\PY{p}{,}\PY{n}{ascimin}\PY{p}{,}\PY{n}{ascimax}\PY{p}{)}\PY{p}{:}
    \PY{n}{word} \PY{o}{=} \PY{p}{[}\PY{p}{]}
    \PY{n}{nonce} \PY{o}{=} \PY{n}{nonce0} \PY{c+c1}{\PYZsh{} the starting value of the nonce value}
    
    \PY{k}{for} \PY{n}{letter} \PY{o+ow}{in} \PY{n}{mex}\PY{p}{:}
        \PY{c+c1}{\PYZsh{} Since we are decrypting and not encrypting, nonce must be negative}
        \PY{n}{shiftedchr} \PY{o}{=} \PY{n+nb}{chr}\PY{p}{(}\PY{n+nb}{ord}\PY{p}{(}\PY{n}{letter}\PY{p}{)} \PY{o}{\PYZhy{}} \PY{n}{nonce} \PY{o}{+} \PY{n}{shift}\PY{p}{)}
        
        \PY{c+c1}{\PYZsh{} Here we are eventually correcting the ASCII number if it is higher ascimax or lower than ascimin}
        \PY{c+c1}{\PYZsh{} because of the shifting}
        \PY{n}{correctedshiftedchr} \PY{o}{=} \PY{n}{reshift}\PY{p}{(}\PY{n}{reshift}\PY{p}{(}\PY{n}{shiftedchr}\PY{p}{,}\PY{n}{ascimin}\PY{p}{,}\PY{n}{ascimax}\PY{p}{)}\PY{p}{,}\PY{n}{ascimin}\PY{p}{,}\PY{n}{ascimax}\PY{p}{)}
        \PY{n}{word}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{correctedshiftedchr}\PY{p}{)}
        \PY{n}{nonce} \PY{o}{=} \PY{n}{nonce} \PY{o}{+} \PY{l+m+mi}{1} \PY{c+c1}{\PYZsh{}  for each letter nonce grows by 1}
        
    \PY{k}{return} \PY{n}{word}

\PY{l+s+sd}{\PYZsq{}\PYZsq{}\PYZsq{}Setting the descypted proposals\PYZsq{}\PYZsq{}\PYZsq{}}
\PY{c+c1}{\PYZsh{} Sicne we need to check if the words belong to an English dictionary, we need to preprocess}
\PY{c+c1}{\PYZsh{} the result of decrypt function, we make everything lowercase, split the words whenever we find a space}
\PY{c+c1}{\PYZsh{} character and removing every puntuation character}
\PY{k}{def} \PY{n+nf}{stringtowords}\PY{p}{(}\PY{n}{phrase}\PY{p}{)}\PY{p}{:}    
    \PY{n}{clear\PYZus{}word} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}
    \PY{k}{for} \PY{n}{char} \PY{o+ow}{in} \PY{n}{phrase}\PY{p}{:}
        \PY{k}{if} \PY{n}{char} \PY{o+ow}{not} \PY{o+ow}{in} \PY{n}{string}\PY{o}{.}\PY{n}{punctuation}\PY{p}{:}
            \PY{n}{clear\PYZus{}word} \PY{o}{+}\PY{o}{=} \PY{n}{char}
    \PY{k}{return} \PY{n}{clear\PYZus{}word}\PY{o}{.}\PY{n}{lower}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{split}\PY{p}{(}\PY{p}{)}
    
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{13}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{ascimax} \PY{o}{=} \PY{l+m+mi}{255}
\PY{n}{ascimin} \PY{o}{=} \PY{l+m+mi}{0}
\PY{n}{mex} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{K]amua!trgpy}\PY{l+s+s1}{\PYZsq{}}
\PY{n}{nonce0} \PY{o}{=} \PY{l+m+mi}{5}

\PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{ascimin}\PY{p}{,}\PY{n}{ascimax}\PY{p}{)}\PY{p}{:}
    \PY{n}{decrypted} \PY{o}{=} \PY{n}{decrypt}\PY{p}{(}\PY{n}{mex}\PY{p}{,}\PY{n}{nonce0}\PY{p}{,}\PY{n}{i}\PY{p}{,}\PY{n}{ascimin}\PY{p}{,}\PY{n}{ascimax}\PY{p}{)}
    \PY{n}{words} \PY{o}{=} \PY{n}{stringtowords}\PY{p}{(}\PY{n}{decrypted}\PY{p}{)}
    \PY{k}{for} \PY{n}{word} \PY{o+ow}{in} \PY{n}{words}\PY{p}{:}
        \PY{c+c1}{\PYZsh{} In the dictionary valid words are single digits numbers and letters, this avoids getting those}
        \PY{c+c1}{\PYZsh{} samples}
        \PY{k}{if} \PY{n+nb}{len}\PY{p}{(}\PY{n}{word}\PY{p}{)} \PY{o}{!=} \PY{l+m+mi}{1}\PY{p}{:}
            \PY{c+c1}{\PYZsh{} Some special non\PYZhy{}printable characters break the function d.check()}
            \PY{k}{try}\PY{p}{:}
                \PY{n}{d}\PY{o}{.}\PY{n}{check}\PY{p}{(}\PY{n}{word}\PY{p}{)}
                \PY{k}{if} \PY{n}{d}\PY{o}{.}\PY{n}{check}\PY{p}{(}\PY{n}{word}\PY{p}{)} \PY{o}{==} \PY{k+kc}{True}\PY{p}{:}
                    \PY{n+nb}{print}\PY{p}{(}\PY{n}{i}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ }\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{join}\PY{p}{(}\PY{n}{words}\PY{p}{)}\PY{p}{)}
            \PY{k}{except}\PY{p}{:}
                \PY{k}{pass}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
10 : padova rocks
25 : ps p^rz
246 : mpbm ow
    \end{Verbatim}

    The used key is 10, the original message text is Padova rocks!

    \hypertarget{object-storage}{%
\subsection{3 Object Storage}\label{object-storage}}

In an object storage system we are mapping objects by name to locations
using a hash table. Imagine we have a system with ten hard disks (10
locations). We enumerate the location of a file using an index of the
hard disk {[}0..9{]}.

Our hash algorithm for placement produces hashes, which are distributed
uniform over the value space for a flat input key distribution.

We want now to simulate the behaviour of our hash algorithmwithout the
need to actually compute any hash value.

Instead of using real filenames, which we would hash and map using a
hash table to a location (as we did in the exercise), we are `computing'
a location for `any' file by generating a random number for the location
in the range {[}0..9{]} to assign a file location. To place a file in
the storage system we use this random location where the file will be
stored and consumes space.

Assume each disk has 1TB of space, we have 10TB in total.

Place as many files of 10GB size as possible to hard disks choosing
random locations until one hard disk is full. \textbf{Hint:} a hard disk
is full once you have stored hundred 10GB files.

    \hypertarget{write-a-program-in-python-r-or-using-root-which-simulates-the-placement-of-10gb-files-to-random-locations-and-account-the-used-space-on-each-hard-disk.-once-the-first-hard-disk-is-full-you-stop-to-place-files.}{%
\subsubsection{3.1Write a program in Python, R or using ROOT, which
simulates the placement of 10GB files to random locations and account
the used space on each hard disk. Once the first hard disk is full, you
stop to place
files.}\label{write-a-program-in-python-r-or-using-root-which-simulates-the-placement-of-10gb-files-to-random-locations-and-account-the-used-space-on-each-hard-disk.-once-the-first-hard-disk-is-full-you-stop-to-place-files.}}

Remark: the distribution changes every time if the random generator is
not seeded always with the same start value. Nevertheless both ways are
accepted!

Possibly visualise the distribution similar to the histogram above.

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{1}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{c+ch}{\PYZsh{}!pip install psutil}
\PY{k+kn}{import} \PY{n+nn}{psutil}
\PY{k+kn}{import} \PY{n+nn}{matplotlib}\PY{n+nn}{.}\PY{n+nn}{pyplot} \PY{k}{as} \PY{n+nn}{plt}
\PY{k+kn}{import} \PY{n+nn}{numpy} \PY{k}{as} \PY{n+nn}{np}
\PY{k+kn}{from} \PY{n+nn}{numba} \PY{k+kn}{import} \PY{n}{njit}
\PY{n}{np}\PY{o}{.}\PY{n}{random}\PY{o}{.}\PY{n}{seed}\PY{p}{(}\PY{l+m+mi}{1234}\PY{p}{)}
\PY{n}{choice} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{random}\PY{o}{.}\PY{n}{choice}

\PY{c+c1}{\PYZsh{} Assuming np.int64 arrays, }
\PY{c+c1}{\PYZsh{} this is the maximum array size allowed for the system}
\PY{n}{n\PYZus{}available} \PY{o}{=} \PY{n}{psutil}\PY{o}{.}\PY{n}{virtual\PYZus{}memory}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{available}\PY{o}{/}\PY{o}{/}\PY{l+m+mi}{8}

\PY{c+c1}{\PYZsh{} The simulation function is a bit more elaborate than a file\PYZhy{}by\PYZhy{}file while loop approach.}
\PY{c+c1}{\PYZsh{} Although the latter is more straightforward, it proved to be too slow for the calculations performed in 3.4.}
\PY{c+c1}{\PYZsh{} This approach exploits numpy and numba for speed purposes.}
\PY{n+nd}{@njit}\PY{p}{(}\PY{n}{fastmath} \PY{o}{=} \PY{k+kc}{True}\PY{p}{)}
\PY{k}{def} \PY{n+nf}{place\PYZus{}files}\PY{p}{(}\PY{n}{N\PYZus{}disks}\PY{p}{,} \PY{n}{disk\PYZus{}size}\PY{p}{,} \PY{n}{file\PYZus{}size}\PY{p}{,} \PY{n}{cores\PYZus{}running} \PY{o}{=} \PY{l+m+mi}{1}\PY{p}{)}\PY{p}{:}
    \PY{c+c1}{\PYZsh{} Initially available space (translated to files)}
    \PY{n}{eff\PYZus{}size} \PY{o}{=} \PY{n}{disk\PYZus{}size}\PY{o}{/}\PY{o}{/}\PY{n}{file\PYZus{}size}
    \PY{n}{max\PYZus{}new\PYZus{}files} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{repeat}\PY{p}{(}\PY{n}{eff\PYZus{}size}\PY{p}{,}\PY{n}{N\PYZus{}disks}\PY{p}{)}

    \PY{k}{while} \PY{n}{np}\PY{o}{.}\PY{n}{all}\PY{p}{(}\PY{n}{max\PYZus{}new\PYZus{}files} \PY{o}{\PYZgt{}} \PY{l+m+mi}{0}\PY{p}{)}\PY{p}{:}
        \PY{c+c1}{\PYZsh{} At least how many more files have to be placed to fill one of the hard disks?}
        \PY{n}{min\PYZus{}max\PYZus{}files} \PY{o}{=} \PY{n}{max\PYZus{}new\PYZus{}files}\PY{o}{.}\PY{n}{min}\PY{p}{(}\PY{p}{)}
 
        \PY{c+c1}{\PYZsh{} On average, how many placements would have to be made for this to be reached?}
        \PY{n}{avg\PYZus{}new\PYZus{}files} \PY{o}{=} \PY{p}{(}\PY{l+m+mi}{3}\PY{o}{*}\PY{n}{N\PYZus{}disks}\PY{o}{/}\PY{o}{/}\PY{l+m+mi}{4}\PY{p}{)}\PY{o}{*}\PY{n}{min\PYZus{}max\PYZus{}files}

        \PY{c+c1}{\PYZsh{} Generate an array for random placement of that many files}
        \PY{n}{placings} \PY{o}{=} \PY{n}{choice}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{arange}\PY{p}{(}\PY{n}{N\PYZus{}disks}\PY{p}{)}\PY{p}{,}\PY{n+nb}{min}\PY{p}{(}\PY{n}{n\PYZus{}available}\PY{o}{/}\PY{o}{/}\PY{n}{cores\PYZus{}running}\PY{p}{,}\PY{n}{avg\PYZus{}new\PYZus{}files}\PY{p}{)}\PY{p}{)}\PY{c+c1}{\PYZsh{} For memory reasons, there\PYZsq{}s an upper bound to the number of new files.}

        \PY{c+c1}{\PYZsh{}\PYZsh{} Count how many files will be added to each disk}
        \PY{n}{new\PYZus{}files}\PY{p}{,} \PY{n}{\PYZus{}} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{histogram}\PY{p}{(}\PY{n}{placings}\PY{p}{,}\PY{n}{bins} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{arange}\PY{p}{(}\PY{n}{N\PYZus{}disks}\PY{o}{+}\PY{l+m+mi}{1}\PY{p}{)}\PY{p}{)}

        \PY{c+c1}{\PYZsh{} did we miss?}
        \PY{n}{excess} \PY{o}{=} \PY{n}{new\PYZus{}files} \PY{o}{\PYZhy{}} \PY{n}{max\PYZus{}new\PYZus{}files}
        \PY{c+c1}{\PYZsh{} is more than one disk full? Stepping back element by element.}
        \PY{k}{while} \PY{n}{np}\PY{o}{.}\PY{n}{any}\PY{p}{(}\PY{n}{excess} \PY{o}{\PYZgt{}} \PY{l+m+mi}{0}\PY{p}{)} \PY{o+ow}{or} \PY{p}{(}\PY{n}{excess}\PY{o}{==}\PY{l+m+mi}{0}\PY{p}{)}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{p}{)} \PY{o}{\PYZgt{}} \PY{l+m+mi}{1}\PY{p}{:}
            \PY{n}{rem\PYZus{}in} \PY{o}{=} \PY{n}{placings}\PY{p}{[}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{]}
            \PY{n}{placings} \PY{o}{=} \PY{n}{placings}\PY{p}{[}\PY{p}{:}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{]}
            \PY{n}{new\PYZus{}files}\PY{p}{[}\PY{n}{rem\PYZus{}in}\PY{p}{]} \PY{o}{\PYZhy{}}\PY{o}{=} \PY{l+m+mi}{1}
            \PY{n}{excess} \PY{o}{=} \PY{n}{new\PYZus{}files} \PY{o}{\PYZhy{}} \PY{n}{max\PYZus{}new\PYZus{}files}


        \PY{c+c1}{\PYZsh{} How much space is left now?}
        \PY{n}{max\PYZus{}new\PYZus{}files} \PY{o}{\PYZhy{}}\PY{o}{=} \PY{n}{new\PYZus{}files}

    \PY{n}{free\PYZus{}space} \PY{o}{=} \PY{n}{max\PYZus{}new\PYZus{}files}\PY{o}{*}\PY{n}{file\PYZus{}size}
    \PY{k}{return} \PY{n}{free\PYZus{}space}


\PY{k}{def} \PY{n+nf}{plot\PYZus{}usage}\PY{p}{(}\PY{n}{disk\PYZus{}size}\PY{p}{,}\PY{n}{free\PYZus{}space}\PY{p}{)}\PY{p}{:}
    \PY{n}{N\PYZus{}disks} \PY{o}{=} \PY{n+nb}{len}\PY{p}{(}\PY{n}{free\PYZus{}space}\PY{p}{)}
    \PY{n}{used} \PY{o}{=} \PY{p}{[}\PY{p}{(}\PY{n}{disk\PYZus{}size} \PY{o}{\PYZhy{}} \PY{n}{f}\PY{p}{)}\PY{o}{/}\PY{l+m+mi}{1024} \PY{k}{for} \PY{n}{f} \PY{o+ow}{in} \PY{n}{free\PYZus{}space}\PY{p}{]}
    \PY{n}{plt}\PY{o}{.}\PY{n}{bar}\PY{p}{(}\PY{n+nb}{range}\PY{p}{(}\PY{n}{N\PYZus{}disks}\PY{p}{)}\PY{p}{,}\PY{n}{used}\PY{p}{,} \PY{n}{width} \PY{o}{=} \PY{l+m+mf}{0.98}\PY{p}{,} \PY{n}{tick\PYZus{}label} \PY{o}{=} \PY{n+nb}{range}\PY{p}{(}\PY{n}{N\PYZus{}disks}\PY{p}{)}\PY{p}{,} \PY{n}{color} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{gray}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n}{plt}\PY{o}{.}\PY{n}{title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Used space on each disk}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n}{plt}\PY{o}{.}\PY{n}{xlabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{harddisk}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n}{plt}\PY{o}{.}\PY{n}{ylabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Used [GB]}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{3}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{N\PYZus{}disks} \PY{o}{=} \PY{l+m+mi}{10}\PY{p}{;} \PY{n}{disk\PYZus{}size} \PY{o}{=} \PY{l+m+mi}{1024}\PY{o}{*}\PY{l+m+mi}{1024} \PY{c+c1}{\PYZsh{} ten 1TB = 1048576MB disks}
\PY{n}{file\PYZus{}size} \PY{o}{=} \PY{l+m+mi}{10}\PY{o}{*}\PY{l+m+mi}{1024} \PY{c+c1}{\PYZsh{} 10GB files}

\PY{n}{free\PYZus{}space} \PY{o}{=} \PY{n}{place\PYZus{}files}\PY{p}{(}\PY{n}{N\PYZus{}disks}\PY{p}{,}\PY{n}{disk\PYZus{}size}\PY{p}{,}\PY{n}{file\PYZus{}size}\PY{p}{)}
\PY{n}{free\PYZus{}space}
\PY{n}{placed\PYZus{}files} \PY{o}{=} \PY{p}{(}\PY{n}{N\PYZus{}disks}\PY{o}{*}\PY{n}{disk\PYZus{}size}\PY{o}{\PYZhy{}}\PY{n}{free\PYZus{}space}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{p}{)}\PY{p}{)}\PY{o}{/}\PY{o}{/}\PY{n}{file\PYZus{}size}

\PY{n}{plot\PYZus{}usage}\PY{p}{(}\PY{n}{disk\PYZus{}size}\PY{p}{,}\PY{n}{free\PYZus{}space}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{datamanagement_files/datamanagement_34_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \hypertarget{a-how-many-files-did-you-manage-to-place}{%
\subsubsection{3.1a How many files did you manage to
place?}\label{a-how-many-files-did-you-manage-to-place}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{4}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+si}{\PYZob{}}\PY{n}{placed\PYZus{}files}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{ files were successfully placed.}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
862 files were successfully placed.
    \end{Verbatim}

    \hypertarget{b-what-is-the-percentage-of-total-used-space-on-all-hard-disks-in-the-moment-the-first-disk-is-full}{%
\subsubsection{3.1b What is the percentage of total used space on all
hard disks in the moment the first disk is
full?}\label{b-what-is-the-percentage-of-total-used-space-on-all-hard-disks-in-the-moment-the-first-disk-is-full}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{5}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{total\PYZus{}space} \PY{o}{=} \PY{n}{N\PYZus{}disks}\PY{o}{*}\PY{n}{disk\PYZus{}size}
\PY{n}{used\PYZus{}percentage} \PY{o}{=} \PY{l+m+mi}{100}\PY{o}{*}\PY{p}{(}\PY{n}{total\PYZus{}space}\PY{o}{\PYZhy{}}\PY{n+nb}{sum}\PY{p}{(}\PY{n}{free\PYZus{}space}\PY{p}{)}\PY{p}{)}\PY{o}{/}\PY{n}{total\PYZus{}space}
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+si}{\PYZob{}}\PY{n+nb}{round}\PY{p}{(}\PY{n}{used\PYZus{}percentage}\PY{p}{,}\PY{l+m+mi}{2}\PY{p}{)}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZpc{} of the total available space was used.}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
84.18\% of the total available space was used.
    \end{Verbatim}

    \hypertarget{repeat-the-same-task-placing-1gb-files-until-the-first-hard-disk-is-full.}{%
\subsubsection{3.2 Repeat the same task placing 1GB files until the
first hard disk is
full.}\label{repeat-the-same-task-placing-1gb-files-until-the-first-hard-disk-is-full.}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{6}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{file\PYZus{}size} \PY{o}{=} \PY{l+m+mi}{1024} \PY{c+c1}{\PYZsh{} 1GB files}

\PY{n}{free\PYZus{}space} \PY{o}{=} \PY{n}{place\PYZus{}files}\PY{p}{(}\PY{n}{N\PYZus{}disks}\PY{p}{,}\PY{n}{disk\PYZus{}size}\PY{p}{,}\PY{n}{file\PYZus{}size}\PY{p}{)}

\PY{n}{placed\PYZus{}files} \PY{o}{=} \PY{p}{(}\PY{n}{N\PYZus{}disks}\PY{o}{*}\PY{n}{disk\PYZus{}size}\PY{o}{\PYZhy{}}\PY{n}{free\PYZus{}space}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{p}{)}\PY{p}{)}\PY{o}{/}\PY{o}{/}\PY{n}{file\PYZus{}size}

\PY{n}{plot\PYZus{}usage}\PY{p}{(}\PY{n}{disk\PYZus{}size}\PY{p}{,}\PY{n}{free\PYZus{}space}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{datamanagement_files/datamanagement_40_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \hypertarget{a-how-many-files-did-you-manage-to-place}{%
\subsubsection{3.2a How many files did you manage to
place?}\label{a-how-many-files-did-you-manage-to-place}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{7}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+si}{\PYZob{}}\PY{n}{placed\PYZus{}files}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{ files were successfully placed.}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
9786 files were successfully placed.
    \end{Verbatim}

    \hypertarget{b-what-is-the-percentage-of-total-used-space-on-all-hard-disks-in-the-moment-the-first-disk-is-full}{%
\subsubsection{3.2b What is the percentage of total used space on all
hard disks in the moment the first disk is
full?}\label{b-what-is-the-percentage-of-total-used-space-on-all-hard-disks-in-the-moment-the-first-disk-is-full}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{8}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{total\PYZus{}space} \PY{o}{=} \PY{n}{N\PYZus{}disks}\PY{o}{*}\PY{n}{disk\PYZus{}size}
\PY{n}{used\PYZus{}percentage} \PY{o}{=} \PY{l+m+mi}{100}\PY{o}{*}\PY{p}{(}\PY{n}{total\PYZus{}space}\PY{o}{\PYZhy{}}\PY{n+nb}{sum}\PY{p}{(}\PY{n}{free\PYZus{}space}\PY{p}{)}\PY{p}{)}\PY{o}{/}\PY{n}{total\PYZus{}space}
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+si}{\PYZob{}}\PY{n+nb}{round}\PY{p}{(}\PY{n}{used\PYZus{}percentage}\PY{p}{,}\PY{l+m+mi}{2}\PY{p}{)}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZpc{} of the total available space was used.}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
95.57\% of the total available space was used.
    \end{Verbatim}

    \hypertarget{based-on-this-observation-why-do-you-think-object-storage-typically-stores-fixed-size-blocks-of-4m-and-not-files-of-gbs-size-as-a-whole-so-called-block-storage-approach}{%
\subsubsection{3.3 Based on this observation: why do you think object
storage typically stores fixed size blocks of 4M and not files of GBs
size as a whole? (so called block storage
approach)}\label{based-on-this-observation-why-do-you-think-object-storage-typically-stores-fixed-size-blocks-of-4m-and-not-files-of-gbs-size-as-a-whole-so-called-block-storage-approach}}

Run the same program for 4M block sizes and demonstrate the benefits

    \hypertarget{solution}{%
\paragraph{SOLUTION}\label{solution}}

To begin with, as the file size is smaller, a bigger fraction of the
fullest disk can be used before stopping. Let each disk have the same
probability of being selected for storage. Since, when using smaller
blocks, the number \(N\) of files is greater for a given size. As \(N\)
increases, a more evenly distributed placement of files is expected,
therefore being able to use a larger fraction of the total space before
having to stop.

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{9}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{file\PYZus{}size} \PY{o}{=} \PY{l+m+mi}{4} \PY{c+c1}{\PYZsh{} 4MB files}

\PY{n}{free\PYZus{}space} \PY{o}{=} \PY{n}{place\PYZus{}files}\PY{p}{(}\PY{n}{N\PYZus{}disks}\PY{p}{,}\PY{n}{disk\PYZus{}size}\PY{p}{,}\PY{n}{file\PYZus{}size}\PY{p}{)}

\PY{n}{placed\PYZus{}files} \PY{o}{=} \PY{p}{(}\PY{n}{N\PYZus{}disks}\PY{o}{*}\PY{n}{disk\PYZus{}size}\PY{o}{\PYZhy{}}\PY{n}{free\PYZus{}space}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{p}{)}\PY{p}{)}\PY{o}{/}\PY{o}{/}\PY{n}{file\PYZus{}size}

\PY{n+nb}{print}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+si}{\PYZob{}}\PY{n}{placed\PYZus{}files}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{ files were successfully placed.}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{total\PYZus{}space} \PY{o}{=} \PY{n}{N\PYZus{}disks}\PY{o}{*}\PY{n}{disk\PYZus{}size}
\PY{n}{used\PYZus{}percentage} \PY{o}{=} \PY{l+m+mi}{100}\PY{o}{*}\PY{p}{(}\PY{n}{total\PYZus{}space}\PY{o}{\PYZhy{}}\PY{n+nb}{sum}\PY{p}{(}\PY{n}{free\PYZus{}space}\PY{p}{)}\PY{p}{)}\PY{o}{/}\PY{n}{total\PYZus{}space}
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+si}{\PYZob{}}\PY{n+nb}{round}\PY{p}{(}\PY{n}{used\PYZus{}percentage}\PY{p}{,}\PY{l+m+mi}{2}\PY{p}{)}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZpc{} of the total available space was used.}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{plot\PYZus{}usage}\PY{p}{(}\PY{n}{disk\PYZus{}size}\PY{p}{,}\PY{n}{free\PYZus{}space}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
2617552 files were successfully placed.
99.85\% of the total available space was used.
    \end{Verbatim}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{datamanagement_files/datamanagement_47_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \hypertarget{compute-the-average-used-space-on-all-hard-disks-and-the-standard-deviation-for-the-average-used-space-for-10-gb-and-1gb-and-4m-files.-how-is-the-standard-deviation-correlated-to-the-block-size-and-why-if-we-now-repeat-such-an-experiment-for-many-more-thousands-of-hard-disks-which-kind-of-distribution-do-you-get-when-you-do-a-histogram-of-the-used-space-of-all-hard-disks}{%
\subsubsection{3.4. Compute the average used space on all hard disks and
the standard deviation for the average used space for 10 GB and 1GB and
4M files. How is the standard deviation correlated to the block size and
why? If we now repeat such an experiment for many more (thousands) of
hard disks, which kind of distribution do you get when you do a
histogram of the used space of all hard
disks?}\label{compute-the-average-used-space-on-all-hard-disks-and-the-standard-deviation-for-the-average-used-space-for-10-gb-and-1gb-and-4m-files.-how-is-the-standard-deviation-correlated-to-the-block-size-and-why-if-we-now-repeat-such-an-experiment-for-many-more-thousands-of-hard-disks-which-kind-of-distribution-do-you-get-when-you-do-a-histogram-of-the-used-space-of-all-hard-disks}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{10}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{c+c1}{\PYZsh{} Using dask for simulation time purposes}
\PY{k+kn}{import} \PY{n+nn}{dask} \PY{k}{as} \PY{n+nn}{dk}

\PY{n}{avgs} \PY{o}{=} \PY{p}{[}\PY{p}{]}
\PY{n}{stds} \PY{o}{=} \PY{p}{[}\PY{p}{]}
\PY{n}{sizes} \PY{o}{=} \PY{p}{[}\PY{l+m+mi}{4}\PY{p}{,}\PY{l+m+mi}{256}\PY{p}{,}\PY{l+m+mi}{512}\PY{p}{,}\PY{l+m+mi}{1024}\PY{p}{,}\PY{l+m+mi}{2}\PY{o}{*}\PY{l+m+mi}{1024}\PY{p}{,}\PY{l+m+mi}{5}\PY{o}{*}\PY{l+m+mi}{1024}\PY{p}{,}\PY{l+m+mi}{10}\PY{o}{*}\PY{l+m+mi}{1024}\PY{p}{]}
\PY{n}{N\PYZus{}disks} \PY{o}{=} \PY{l+m+mi}{10}
\PY{n}{cores\PYZus{}running} \PY{o}{=} \PY{n}{psutil}\PY{o}{.}\PY{n}{cpu\PYZus{}count}\PY{p}{(}\PY{p}{)}

\PY{k}{for} \PY{n}{file\PYZus{}size} \PY{o+ow}{in} \PY{n}{sizes}\PY{p}{:}
    \PY{n}{simulate} \PY{o}{=} \PY{k}{lambda} \PY{n}{N}\PY{p}{:} \PY{n}{dk}\PY{o}{.}\PY{n}{delayed}\PY{p}{(}\PY{p}{)}\PY{p}{(}
        \PY{p}{[}
            \PY{n}{dk}\PY{o}{.}\PY{n}{delayed}\PY{p}{(}\PY{n}{place\PYZus{}files}\PY{p}{)}\PY{p}{(}\PY{n}{N\PYZus{}disks}\PY{p}{,}\PY{n}{disk\PYZus{}size}\PY{p}{,}\PY{n}{file\PYZus{}size}\PY{p}{,} \PY{n}{cores\PYZus{}running} \PY{o}{=} \PY{n}{cores\PYZus{}running}\PY{p}{)}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{p}{)}\PYZbs{}
            \PY{k}{for} \PY{n}{\PYZus{}} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{N}\PY{p}{)}
        \PY{p}{]}
        \PY{p}{)}\PY{o}{.}\PY{n}{compute}\PY{p}{(}\PY{p}{)}
    \PY{n}{sims} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{simulate}\PY{p}{(}\PY{l+m+mi}{2500}\PY{p}{)}\PY{p}{)}
    \PY{n}{used} \PY{o}{=} \PY{p}{(}\PY{n}{N\PYZus{}disks}\PY{o}{*}\PY{n}{disk\PYZus{}size} \PY{o}{\PYZhy{}} \PY{n}{sims}\PY{p}{)}\PY{o}{/}\PY{l+m+mi}{1024}\PY{o}{/}\PY{l+m+mi}{1024}

    \PY{n}{avg} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{average}\PY{p}{(}\PY{n}{used}\PY{p}{)}
    \PY{n}{std} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{std}\PY{p}{(}\PY{n}{used}\PY{p}{)}
    
    \PY{n}{avgs}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{avg}\PY{p}{)}
    \PY{n}{stds}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{std}\PY{p}{)}

\PY{n}{plt}\PY{o}{.}\PY{n}{title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Average of used space in all Hard Disks}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{xlabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{File size (MB)}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{ylabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Used space (TB)}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{sizes}\PY{p}{,}\PY{n}{avgs}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{o\PYZhy{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}

\PY{n}{plt}\PY{o}{.}\PY{n}{title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Standard Deviation of used space in all Hard Disks}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{xlabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{File size (MB)}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{ylabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Used space (TB)}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{sizes}\PY{p}{,}\PY{n}{stds}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{o\PYZhy{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{color} \PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{orange}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{datamanagement_files/datamanagement_49_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{datamanagement_files/datamanagement_49_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{11}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{c+c1}{\PYZsh{}\PYZsh{} Repeating experiment but with thousands of disks. Only performed for file size 10 GB because of computation time.}

\PY{n}{file\PYZus{}size} \PY{o}{=} \PY{l+m+mi}{10}\PY{o}{*}\PY{l+m+mi}{1024}
\PY{n}{N\PYZus{}disks} \PY{o}{=} \PY{l+m+mi}{2500}
\PY{n}{simulate} \PY{o}{=} \PY{k}{lambda} \PY{n}{N}\PY{p}{:} \PY{n}{dk}\PY{o}{.}\PY{n}{delayed}\PY{p}{(}\PY{p}{)}\PY{p}{(}
    \PY{p}{[}
        \PY{n}{dk}\PY{o}{.}\PY{n}{delayed}\PY{p}{(}\PY{n}{place\PYZus{}files}\PY{p}{)}\PY{p}{(}\PY{n}{N\PYZus{}disks}\PY{p}{,}\PY{n}{disk\PYZus{}size}\PY{p}{,}\PY{n}{file\PYZus{}size}\PY{p}{,} \PY{n}{cores\PYZus{}running} \PY{o}{=} \PY{n}{cores\PYZus{}running}\PY{p}{)}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{p}{)}\PYZbs{}
        \PY{k}{for} \PY{n}{\PYZus{}} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{N}\PY{p}{)}
    \PY{p}{]}
    \PY{p}{)}\PY{o}{.}\PY{n}{compute}\PY{p}{(}\PY{p}{)}
\PY{n}{sims} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{simulate}\PY{p}{(}\PY{l+m+mi}{10000}\PY{p}{)}\PY{p}{)}
\PY{n}{used} \PY{o}{=} \PY{p}{(}\PY{n}{N\PYZus{}disks}\PY{o}{*}\PY{n}{disk\PYZus{}size} \PY{o}{\PYZhy{}} \PY{n}{sims}\PY{p}{)}\PY{o}{/}\PY{l+m+mi}{1024}\PY{o}{/}\PY{l+m+mi}{1024}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{20}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k+kn}{from} \PY{n+nn}{scipy}\PY{n+nn}{.}\PY{n+nn}{stats} \PY{k+kn}{import} \PY{n}{norm} \PY{k}{as} \PY{n}{scnorm}

\PY{n}{avg} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{average}\PY{p}{(}\PY{n}{used}\PY{p}{)}
\PY{n}{std} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{std}\PY{p}{(}\PY{n}{used}\PY{p}{)}
\PY{n}{rv} \PY{o}{=} \PY{n}{scnorm}\PY{p}{(}\PY{n}{avg}\PY{p}{,}\PY{n}{std}\PY{p}{)}
\PY{n}{x} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{linspace}\PY{p}{(}\PY{n}{used}\PY{o}{.}\PY{n}{min}\PY{p}{(}\PY{p}{)}\PY{p}{,}\PY{n}{used}\PY{o}{.}\PY{n}{max}\PY{p}{(}\PY{p}{)}\PY{p}{,}\PY{l+m+mi}{1000}\PY{p}{)}
\PY{n}{p} \PY{o}{=} \PY{n}{rv}\PY{o}{.}\PY{n}{pdf}\PY{p}{(}\PY{n}{x}\PY{p}{)}
\PY{n}{a}\PY{p}{,} \PY{n}{beans} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{histogram}\PY{p}{(}\PY{n}{used}\PY{p}{,} \PY{n}{bins} \PY{o}{=} \PY{l+m+mi}{40}\PY{p}{)}
\PY{n}{A} \PY{o}{=} \PY{p}{(}\PY{n}{a}\PY{o}{*}\PY{p}{(}\PY{n}{beans}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{:}\PY{p}{]}\PY{o}{\PYZhy{}}\PY{n}{beans}\PY{p}{[}\PY{p}{:}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{)}\PY{p}{)}\PY{o}{.}\PY{n}{sum}\PY{p}{(}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{x}\PY{p}{,}\PY{n}{A}\PY{o}{*}\PY{n}{p}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{hist}\PY{p}{(}\PY{n}{used}\PY{p}{,} \PY{n}{bins} \PY{o}{=} \PY{l+m+mi}{40}\PY{p}{)}
\PY{n}{unit} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{GB}\PY{l+s+s1}{\PYZsq{}}
\PY{n}{norm} \PY{o}{=} \PY{l+m+mi}{1024}
\PY{n}{plt}\PY{o}{.}\PY{n}{title}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Final storage use for }\PY{l+s+si}{\PYZob{}}\PY{n+nb}{int}\PY{p}{(}\PY{n}{file\PYZus{}size}\PY{o}{/}\PY{n}{norm}\PY{p}{)}\PY{l+s+si}{\PYZcb{}}\PY{l+s+si}{\PYZob{}}\PY{n}{unit}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{ files}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{xlabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{used space [TB]}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{ylabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{density}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{datamanagement_files/datamanagement_51_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \hypertarget{solution}{%
\paragraph{SOLUTION}\label{solution}}

The Pascal (Negative Binomial) distribution gives the probability of
amounting to \(K\) failures before achieving \(N\) successes.\\
Let \(B\) be the first hard disk to be filled. We consider placing a
file in \(B\) to be a successful trial. The procedure stops as
\(N = \texttt{int(disk}\_\texttt{size/file}\_\texttt{size)}\) trials are
successful.\\
The histogram represents the frequency of a given
\(\texttt{(K+N)*file}\_\texttt{size}\) final storage use. This is
equivalent to the frequency of a given range of \(K+N\) total trials.\\
When \(\texttt{N}\_\texttt{disks}\) is large enough, \(K+N \approx K\),
in which case this would be approximately the frequency of a given range
of \(K\) total failures before achieving \(N\) successes.\\
Therefore, with good approximation, the distribution of used space
follows a Pascal distribution, which can in turn be fitted with a normal
distribution.

    \hypertarget{rest-apis-block-chain-technology}{%
\subsection{4 Rest APIs \& Block Chain
Technology}\label{rest-apis-block-chain-technology}}

    Under https://pansophy.app:8443 you find a Crypto Coin Server exporting
a simple Block Chain.

You can open this URL in any web browser to see the current Block Chain
status and the account information. At the time of writing the initial
birth account of the Block Chain contained 1M coins ( ``genesis'' :
1000000 ) :

The REST responses are given in JSON format. Our REST API uses secure
HTTP protocol and it is based on two HTTP methods:

GET

POST

GET requests are used, to retrieve any kind of information, POST
requests are used to change state in the server.

The task is to implement a client and use a simple REST API to submit
transactions to the Block Chain. Your goal is to book coins from other
people's accounts to your own account. The server implements a Proof Of
Time algorithm. To add a transaction to move coins to your account, you
have to submit a merit request and you have to let time pass before you
can send a claim request to execute your transaction on the Block Chain.
If you claim your transaction too fast after a merit request, your
request is discarded. The server enforces a Proof Of Time of a minimum
of 10 seconds!

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{27}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k+kn}{import} \PY{n+nn}{os}
\PY{k+kn}{import} \PY{n+nn}{json}
\PY{k+kn}{import} \PY{n+nn}{time}
\PY{k+kn}{import} \PY{n+nn}{numpy} \PY{k}{as} \PY{n+nn}{np}
\PY{k+kn}{import} \PY{n+nn}{multiprocessing}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{28}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{url}     \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{https://pansophy.app:8443/}\PY{l+s+s1}{\PYZsq{}}
\PY{n}{ourteam} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{GitPush}\PY{l+s+s1}{\PYZsq{}}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{29}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{c+c1}{\PYZsh{} If the site does not temporarely work, I saved in this file an example of the json code:}
\PY{n}{exfile} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{jsonex}\PY{l+s+s1}{\PYZsq{}}

\PY{k}{with} \PY{n+nb}{open}\PY{p}{(}\PY{n}{exfile}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{r}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)} \PY{k}{as} \PY{n}{file}\PY{p}{:}
    \PY{n}{src} \PY{o}{=} \PY{n}{file}\PY{o}{.}\PY{n}{read}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{replace}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{data} \PY{o}{=} \PY{n}{json}\PY{o}{.}\PY{n}{loads}\PY{p}{(}\PY{n}{src}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{30}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{l+s+sd}{\PYZsq{}\PYZsq{}\PYZsq{}This function is just auxiliary for other functions. It returns the json of the page\PYZsq{}\PYZsq{}\PYZsq{}}
\PY{c+c1}{\PYZsh{} url: the page: https://pansophy.app:8443/}
\PY{c+c1}{\PYZsh{} sec: for how long do you want to read it}
\PY{c+c1}{\PYZsh{} debug: prints the json string}
\PY{k}{def} \PY{n+nf}{rest\PYZus{}curl}\PY{p}{(}\PY{n}{url}\PY{p}{,}\PY{n}{sec} \PY{o}{=} \PY{l+m+mi}{5}\PY{p}{,} \PY{n}{verbose} \PY{o}{=} \PY{k+kc}{False}\PY{p}{,} \PY{n}{debug} \PY{o}{=} \PY{k+kc}{False}\PY{p}{)}\PY{p}{:}
    \PY{n}{cmd} \PY{o}{=}  \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{curl \PYZhy{}k }\PY{l+s+s1}{\PYZsq{}} \PY{o}{+} \PY{n}{url} \PY{o}{+} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ \PYZam{} sleep }\PY{l+s+s1}{\PYZsq{}} \PY{o}{+} \PY{n+nb}{str}\PY{p}{(}\PY{n}{sec}\PY{p}{)} \PY{o}{+} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ ; kill \PYZdl{}!}\PY{l+s+s1}{\PYZsq{}}
    
    \PY{k}{if} \PY{n}{verbose}\PY{p}{:}
        \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Executing:}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s1}{  }\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{cmd}\PY{p}{)}
    \PY{n}{scr} \PY{o}{=} \PY{n}{os}\PY{o}{.}\PY{n}{popen}\PY{p}{(}\PY{n}{cmd}\PY{p}{)}\PY{o}{.}\PY{n}{read}\PY{p}{(}\PY{p}{)}
    
    \PY{k}{if} \PY{n}{debug}\PY{p}{:}
        \PY{n+nb}{print}\PY{p}{(}\PY{n}{scr}\PY{p}{)}
    
    \PY{k}{if} \PY{n+nb}{len}\PY{p}{(}\PY{n}{scr}\PY{p}{)} \PY{o}{==} \PY{l+m+mi}{0}\PY{p}{:}
        \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ERROR: The site is currently NOT working}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{k}{return} \PY{l+m+mi}{0}
    \PY{k}{else}\PY{p}{:}
        \PY{k}{return} \PY{n}{json}\PY{o}{.}\PY{n}{loads}\PY{p}{(}\PY{n}{scr}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{31}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{l+s+sd}{\PYZsq{}\PYZsq{}\PYZsq{}Returns the current situation regarding teams and their coins\PYZsq{}\PYZsq{}\PYZsq{}}
\PY{c+c1}{\PYZsh{} offline: if the site does not work set offline=True to load a json example}
\PY{k}{def} \PY{n+nf}{rest\PYZus{}teamsandcoins}\PY{p}{(}\PY{n}{url}\PY{p}{,} \PY{n}{offline} \PY{o}{=} \PY{k+kc}{False}\PY{p}{)}\PY{p}{:}
    \PY{k}{if} \PY{n}{offline}\PY{p}{:}
        \PY{n}{jsn} \PY{o}{=} \PY{n}{data}
    \PY{k}{else}\PY{p}{:}
        \PY{n}{jsn} \PY{o}{=} \PY{n}{rest\PYZus{}curl}\PY{p}{(}\PY{n}{url}\PY{p}{,} \PY{n}{sec} \PY{o}{=} \PY{l+m+mi}{1}\PY{p}{,} \PY{n}{verbose} \PY{o}{=} \PY{k+kc}{False}\PY{p}{)}
    
    \PY{k}{return}\PY{p}{(}\PY{n}{jsn}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{accounts}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
    
\PY{n}{teams} \PY{o}{=} \PY{n}{rest\PYZus{}teamsandcoins}\PY{p}{(}\PY{n}{url}\PY{p}{)}

\PY{c+c1}{\PYZsh{}print(teams.keys())   \PYZsh{} Prints the teams}
\PY{c+c1}{\PYZsh{}print(teams.values()) \PYZsh{} Prints the values}

\PY{c+c1}{\PYZsh{} To convert to an array you can do:}
\PY{c+c1}{\PYZsh{}\PYZsh{} names = list(teams.keys())}
\PY{c+c1}{\PYZsh{}\PYZsh{} coins = list(teams.values())}

\PY{c+c1}{\PYZsh{}\PYZsh{} print(names[0], coins[0])}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{32}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{def} \PY{n+nf}{rest\PYZus{}initiatetransation}\PY{p}{(}\PY{n}{url}\PY{p}{,} \PY{n}{team}\PY{p}{,} \PY{n}{stealfrom}\PY{p}{,} \PY{n}{howmuch} \PY{o}{=} \PY{l+m+mi}{100}\PY{p}{)}\PY{p}{:}
    \PY{n}{cmd} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{curl \PYZhy{}k \PYZhy{}X POST \PYZhy{}H }\PY{l+s+s1}{\PYZdq{}}\PY{l+s+s1}{Content\PYZhy{}Type: application/json}\PY{l+s+s1}{\PYZdq{}}\PY{l+s+s1}{ \PYZhy{}d }\PY{l+s+se}{\PYZbs{}\PYZsq{}}\PY{l+s+s1}{\PYZob{}}\PY{l+s+s1}{\PYZdq{}}\PY{l+s+s1}{operation}\PY{l+s+s1}{\PYZdq{}}\PY{l+s+s1}{: }\PY{l+s+s1}{\PYZdq{}}\PY{l+s+s1}{merit}\PY{l+s+s1}{\PYZdq{}}\PY{l+s+s1}{,}\PY{l+s+s1}{\PYZdq{}}\PY{l+s+s1}{team}\PY{l+s+s1}{\PYZdq{}}\PY{l+s+s1}{: }\PY{l+s+s1}{\PYZdq{}}\PY{l+s+s1}{\PYZsq{}}\PY{o}{+} \PY{n}{team} \PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZdq{}}\PY{l+s+s1}{, }\PY{l+s+s1}{\PYZdq{}}\PY{l+s+s1}{coin}\PY{l+s+s1}{\PYZdq{}}\PY{l+s+s1}{: }\PY{l+s+s1}{\PYZsq{}}\PY{o}{+}\PY{n+nb}{str}\PY{p}{(}\PY{n}{howmuch}\PY{p}{)}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{, }\PY{l+s+s1}{\PYZdq{}}\PY{l+s+s1}{stealfrom}\PY{l+s+s1}{\PYZdq{}}\PY{l+s+s1}{: }\PY{l+s+s1}{\PYZdq{}}\PY{l+s+s1}{\PYZsq{}} \PY{o}{+} \PY{n}{stealfrom} \PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZdq{}}\PY{l+s+s1}{\PYZcb{}}\PY{l+s+se}{\PYZbs{}\PYZsq{}}\PY{l+s+s1}{ }\PY{l+s+s1}{\PYZsq{}} \PY{o}{+} \PY{n}{url}
    \PY{c+c1}{\PYZsh{}print(cmd)}
    \PY{n}{os}\PY{o}{.}\PY{n}{system}\PY{p}{(}\PY{n}{cmd}\PY{p}{)}
    \PY{k}{return}
 
\PY{k}{def} \PY{n+nf}{rest\PYZus{}claimtransation}\PY{p}{(}\PY{n}{url}\PY{p}{,} \PY{n}{team}\PY{p}{)}\PY{p}{:}
    \PY{n}{cmd} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{curl \PYZhy{}k \PYZhy{}X POST \PYZhy{}H }\PY{l+s+s1}{\PYZdq{}}\PY{l+s+s1}{Content\PYZhy{}Type: application/json}\PY{l+s+s1}{\PYZdq{}}\PY{l+s+s1}{ \PYZhy{}d }\PY{l+s+se}{\PYZbs{}\PYZsq{}}\PY{l+s+s1}{\PYZob{}}\PY{l+s+s1}{\PYZdq{}}\PY{l+s+s1}{operation}\PY{l+s+s1}{\PYZdq{}}\PY{l+s+s1}{: }\PY{l+s+s1}{\PYZdq{}}\PY{l+s+s1}{claim}\PY{l+s+s1}{\PYZdq{}}\PY{l+s+s1}{,}\PY{l+s+s1}{\PYZdq{}}\PY{l+s+s1}{team}\PY{l+s+s1}{\PYZdq{}}\PY{l+s+s1}{: }\PY{l+s+s1}{\PYZdq{}}\PY{l+s+s1}{\PYZsq{}}\PY{o}{+}\PY{n}{team}\PY{o}{+}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZdq{}}\PY{l+s+s1}{\PYZcb{}}\PY{l+s+se}{\PYZbs{}\PYZsq{}}\PY{l+s+s1}{ }\PY{l+s+s1}{\PYZsq{}} \PY{o}{+} \PY{n}{url}
    \PY{c+c1}{\PYZsh{}print(cmd)}
    \PY{n}{os}\PY{o}{.}\PY{n}{system}\PY{p}{(}\PY{n}{cmd}\PY{p}{)}
    
\PY{k}{def} \PY{n+nf}{rest\PYZus{}initiateandclaim}\PY{p}{(}\PY{n}{url}\PY{p}{,} \PY{n}{ourteam}\PY{p}{,} \PY{n}{enemyteam}\PY{p}{,} \PY{n}{howmuch} \PY{o}{=} \PY{l+m+mi}{100}\PY{p}{)}\PY{p}{:}
    \PY{n}{rest\PYZus{}initiatetransation}\PY{p}{(}\PY{n}{url}\PY{p}{,} \PY{n}{ourteam}\PY{p}{,} \PY{n}{enemyteam}\PY{p}{,} \PY{n}{howmuch}\PY{p}{)}
    \PY{n}{time}\PY{o}{.}\PY{n}{sleep}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{)}
    
    \PY{n}{rest\PYZus{}claimtransation}\PY{p}{(}\PY{n}{url}\PY{p}{,}\PY{n}{ourteam}\PY{p}{)}
    \PY{n}{rest\PYZus{}claimtransation}\PY{p}{(}\PY{n}{url}\PY{p}{,}\PY{n}{enemyteam}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \hypertarget{use-the-rest-api-and-the-curl-command-to-transfer-coins-of-the-genesis-or-any-other-account-on-your-own-team-account.}{%
\subsubsection{4.1.1 Use the REST API and the curl command to transfer
coins of the genesis or any other account on your own team
account.}\label{use-the-rest-api-and-the-curl-command-to-transfer-coins-of-the-genesis-or-any-other-account-on-your-own-team-account.}}

You can use the -d option to POST a document. You have to indicate in
your request, that the content type of the document is JSON. To do this
you can add an HTTP header for this command\\
\texttt{curl\ ...\ -HContent-Type:\ application/json\ ...}

If you prefer, you can use a Python program, doing the same HTTPS
requests respecting Proof of Time.If you want to have some more fun, you
can also load the current state into your Python script using GET
requests and programatically steal from accounts which are reported. Be
aware, that you can never steal the last coin of an account and if at
the time of a claim there are not enough coins left on an account, your
transaction is discarded.

To you will have to add at least one successful transaction to the Block
Chain.

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{39}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{teams} \PY{o}{=} \PY{n}{rest\PYZus{}teamsandcoins}\PY{p}{(}\PY{n}{url}\PY{p}{)}
\PY{n}{names} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{n}{teams}\PY{o}{.}\PY{n}{keys}\PY{p}{(}\PY{p}{)}\PY{p}{)}
\PY{n}{coins} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{n}{teams}\PY{o}{.}\PY{n}{values}\PY{p}{(}\PY{p}{)}\PY{p}{)}

\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Balance before transfer:}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{  }\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{names}\PY{p}{[}\PY{n}{names}\PY{o}{.}\PY{n}{index}\PY{p}{(}\PY{n}{ourteam}\PY{p}{)}\PY{p}{]}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{: }\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{coins}\PY{p}{[}\PY{n}{names}\PY{o}{.}\PY{n}{index}\PY{p}{(}\PY{n}{ourteam}\PY{p}{)}\PY{p}{]}\PY{p}{)}

\PY{n}{rest\PYZus{}initiatetransation}\PY{p}{(}\PY{n}{url}\PY{p}{,} \PY{n}{ourteam}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{CANE}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+m+mi}{100}\PY{p}{)}
\PY{n}{time}\PY{o}{.}\PY{n}{sleep}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{)}
\PY{n}{rest\PYZus{}claimtransation}\PY{p}{(}\PY{n}{url}\PY{p}{,}\PY{n}{ourteam}\PY{p}{)}

\PY{n}{teams} \PY{o}{=} \PY{n}{rest\PYZus{}teamsandcoins}\PY{p}{(}\PY{n}{url}\PY{p}{)}
\PY{n}{names} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{n}{teams}\PY{o}{.}\PY{n}{keys}\PY{p}{(}\PY{p}{)}\PY{p}{)}
\PY{n}{coins} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{n}{teams}\PY{o}{.}\PY{n}{values}\PY{p}{(}\PY{p}{)}\PY{p}{)}

\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s1}{Balance after tansaction}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{  }\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{names}\PY{p}{[}\PY{n}{names}\PY{o}{.}\PY{n}{index}\PY{p}{(}\PY{n}{ourteam}\PY{p}{)}\PY{p}{]}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{: }\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{coins}\PY{p}{[}\PY{n}{names}\PY{o}{.}\PY{n}{index}\PY{p}{(}\PY{n}{ourteam}\PY{p}{)}\PY{p}{]}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
Balance before transfer:
   GitPush :  1

Balance after tansaction
   GitPush :  101
    \end{Verbatim}

    \hypertarget{what-is-the-maximum-number-of-transactions-one-given-team-can-add-to-the-block-chain-in-one-day}{%
\subsubsection{4.1.2 What is the maximum number of transactions one
given team can add to the Block Chain in one
day?}\label{what-is-the-maximum-number-of-transactions-one-given-team-can-add-to-the-block-chain-in-one-day}}

    \hypertarget{solution}{%
\paragraph{SOLUTION}\label{solution}}

To find the maximum number of transaction we tried different methods:

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{34}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{l+s+sd}{\PYZsq{}\PYZsq{}\PYZsq{}BRUTEFORCE\PYZsq{}\PYZsq{}\PYZsq{}}
\PY{c+c1}{\PYZsh{} this method just makes a transaction every 10 seconds and updates a counter}
\PY{n}{bruteforce} \PY{o}{=} \PY{k+kc}{False}
\PY{n}{i} \PY{o}{=} \PY{l+m+mi}{0}

\PY{k}{while}\PY{p}{(}\PY{n}{bruteforce}\PY{p}{)}\PY{p}{:}
    \PY{n}{rest\PYZus{}initiatetransation}\PY{p}{(}\PY{n}{url}\PY{p}{,} \PY{n}{ourteam}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{genesis}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    \PY{n}{time}\PY{o}{.}\PY{n}{sleep}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{)}
    \PY{n}{rest\PYZus{}claimtransation}\PY{p}{(}\PY{n}{url}\PY{p}{,}\PY{n}{ourteam}\PY{p}{)}
    
    \PY{n}{teams} \PY{o}{=} \PY{n}{rest\PYZus{}teamsandcoins}\PY{p}{(}\PY{n}{url}\PY{p}{)}
    \PY{n}{names} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{n}{teams}\PY{o}{.}\PY{n}{keys}\PY{p}{(}\PY{p}{)}\PY{p}{)}
    \PY{n}{coins} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{n}{teams}\PY{o}{.}\PY{n}{values}\PY{p}{(}\PY{p}{)}\PY{p}{)}

    \PY{n+nb}{print}\PY{p}{(}\PY{n}{i}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{names}\PY{p}{[}\PY{n}{names}\PY{o}{.}\PY{n}{index}\PY{p}{(}\PY{n}{ourteam}\PY{p}{)}\PY{p}{]}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{: }\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{coins}\PY{p}{[}\PY{n}{names}\PY{o}{.}\PY{n}{index}\PY{p}{(}\PY{n}{ourteam}\PY{p}{)}\PY{p}{]}\PY{p}{)}
    \PY{n}{i} \PY{o}{=} \PY{n}{i} \PY{o}{+} \PY{l+m+mi}{1}
\end{Verbatim}
\end{tcolorbox}

    The bruteforce method is that straightforward, eventually we would
expect some error to show up but until now it didn't, the amount of
transactions appears to be only limited by the \textbf{Proof Of Time}
rule:$\text{Maximum number of transactions} = \frac{\text{\# seconds in a day}}{10}=\frac{24*3600}{10} = 8640$

Two methods were tried in order to bypass this limit, however they ended
up being unsuccessful. (See Appendix)

    \hypertarget{the-server-has-a-function-to-compute-a-hash-of-a-block-in-the-block-chain}{%
\subsubsection{4.2 The server has a function to compute a hash of a
block in the Block
Chain:}\label{the-server-has-a-function-to-compute-a-hash-of-a-block-in-the-block-chain}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{35}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k+kn}{import} \PY{n+nn}{hashlib}

\PY{k}{def} \PY{n+nf}{calculate\PYZus{}hash}\PY{p}{(}\PY{n}{index}\PY{p}{,}\PY{n}{team}\PY{p}{,}\PY{n}{prev\PYZus{}hash}\PY{p}{,}\PY{n}{coins}\PY{p}{,}\PY{n}{timestamp}\PY{p}{)}\PY{p}{:}
    \PY{n}{block\PYZus{}of\PYZus{}string} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+si}{\PYZob{}\PYZcb{}}\PY{l+s+si}{\PYZob{}\PYZcb{}}\PY{l+s+si}{\PYZob{}\PYZcb{}}\PY{l+s+si}{\PYZob{}\PYZcb{}}\PY{l+s+si}{\PYZob{}\PYZcb{}}\PY{l+s+s2}{\PYZdq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}\PY{n}{index}\PY{p}{,}
                                          \PY{n}{team}\PY{p}{,}
                                          \PY{n}{prev\PYZus{}hash}\PY{p}{,}
                                          \PY{n}{coins}\PY{p}{,}
                                          \PY{n}{timestamp}\PY{p}{)}
    
    \PY{k}{return} \PY{n}{hashlib}\PY{o}{.}\PY{n}{sha256}\PY{p}{(}\PY{n}{block\PYZus{}of\PYZus{}string}\PY{o}{.}\PY{n}{encode}\PY{p}{(}\PY{p}{)}\PY{p}{)}\PY{o}{.}\PY{n}{hexdigest}\PY{p}{(}\PY{p}{)}

\PY{n}{calculate\PYZus{}hash}\PY{p}{(}\PY{l+m+mi}{2250}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{GitPush}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{d30ac7cf770b3db510ae388fc84160534c805d93c681c5dcbb8b1c8933e87525}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}\PY{l+m+mi}{301}\PY{p}{,}\PY{l+m+mi}{1623770741}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, size=fbox, boxrule=.5pt, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{35}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
'bbed9bfd59dbb2bd92c5d82797c827dd6a646bf0a69795eddc76bc0796958c04'
\end{Verbatim}
\end{tcolorbox}
        
    \hypertarget{explain-what-this-function-does-and-why-is-this-the-key-for-block-chain-technology}{%
\subsubsection{4.2.1 Explain what this function does and why is this
`the key' for Block Chain
technology?}\label{explain-what-this-function-does-and-why-is-this-the-key-for-block-chain-technology}}

    \hypertarget{solution}{%
\paragraph{SOLUTION}\label{solution}}

Given an instance, the function \texttt{calculate\_hash} creates the
next hash in the chain. Each block of the blockchain contains the
hashstring for the previous block and for itself. This will let us
navigate in the blockchain through this reference method.

Most importantly the hash is used for decorruption and security purposes
(as explained later)

    \hypertarget{if-you-have-the-knowledge-of-the-hash-function-how-can-you-validate-the-contents-of-the-block-chain-you-received-using-a-get-request-to-make-sure-nobody-has-tampered-with-it-you-dont-need-to-implement-it-explain-the-algorithm-to-validate-a-block-chain}{%
\subsubsection{4.2.2 If you have the knowledge of the hash function, how
can you validate the contents of the Block Chain you received using a
GET request to make sure, nobody has tampered with it? You don't need to
implement it! Explain the algorithm to validate a Block
Chain!}\label{if-you-have-the-knowledge-of-the-hash-function-how-can-you-validate-the-contents-of-the-block-chain-you-received-using-a-get-request-to-make-sure-nobody-has-tampered-with-it-you-dont-need-to-implement-it-explain-the-algorithm-to-validate-a-block-chain}}

    \hypertarget{solution}{%
\paragraph{SOLUTION}\label{solution}}

Being the hash generated using the contents as an input, we can generate
the hash from the block and see if it maches the hash we already have.

    \hypertarget{why-might-the-get-rest-api-run-into-scalability-problems}{%
\subsubsection{4.2.3 Why might the GET REST API run into scalability
problems?}\label{why-might-the-get-rest-api-run-into-scalability-problems}}

Express the scalability behaviour of execution times of GET and POST
requests in Big O notation in relation to the number of transactions
recorded in the Block Chain! Draw execution time vs transactions for GET
and POST requests.

    \hypertarget{solution}{%
\paragraph{SOLUTION}\label{solution}}

POST just appends text in json format in the document, it does not
depend on how many transactions were made, it scales as O(1)\\
GET reads the whole document, the bigger the file is the longer it will
take, it scales as O(n)

    \hypertarget{if-the-crypto-server-goes-down-the-way-it-is-implemented-it-loses-the-current-account-balances.-how-can-the-server-recompute-the-account-balances-after-a-restart-from-the-saved-block-chain}{%
\subsubsection{4.2.4 If the Crypto server goes down, the way it is
implemented it loses the current account balances. How can the server
recompute the account balances after a restart from the saved Block
Chain?}\label{if-the-crypto-server-goes-down-the-way-it-is-implemented-it-loses-the-current-account-balances.-how-can-the-server-recompute-the-account-balances-after-a-restart-from-the-saved-block-chain}}

    \hypertarget{solution}{%
\paragraph{SOLUTION}\label{solution}}

It should compute the balances starting again from the Genesis block and
updating them after any transaction made, possibly checking if the
hashes are correct (Integrity check).\\
Of course, this is not optimal if the number of all transactions is very
high.

    \hypertarget{what-are-the-advantages-of-using-a-rest-api-and-json-in-a-client-server-architecture-what-are-possible-disadvantages}{%
\subsubsection{4.2.5 What are the advantages of using a REST API and
JSON in a client-server architecture? What are possible
disadvantages?}\label{what-are-the-advantages-of-using-a-rest-api-and-json-in-a-client-server-architecture-what-are-possible-disadvantages}}

    \hypertarget{solution}{%
\paragraph{SOLUTION}\label{solution}}

A client-server architecture is relatively easy to implement and often
has a fast performance. However, it lacks proper security protocols. A
more common choice is a peer-to-peer architecture, which is more secure
given it is decentalized, however it faces some complexity of
syncronization between all nodes (solved by sophisticated algorithms).

    \hypertarget{appendix}{%
\section{Appendix}\label{appendix}}

    \hypertarget{section}{%
\subsection{4}\label{section}}

The following two methods are attemps to by-pass the \textbf{Proof Of
Time} 10-seconds block: * Using multiprocess it was tested if was
possible to claim different transactions from different teams to ours,
however the error:
\texttt{\{"msg":\ "accepted"\}\{"msg":\ "claim\ too\ early\ -\ deleted\ your\ request"\}}
appeared anyway.

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{ }{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{l+s+sd}{\PYZsq{}\PYZsq{}\PYZsq{}TRYING TO PARALLELIZE IT USING MULTIPROCESSING\PYZsq{}\PYZsq{}\PYZsq{}}
\PY{c+c1}{\PYZsh{} this method finds the available accounts we can steal from an use the multiprocess library to }
\PY{c+c1}{\PYZsh{} steal from them in parallel}
\PY{n}{multi} \PY{o}{=} \PY{k+kc}{False}
\PY{n}{i} \PY{o}{=} \PY{l+m+mi}{0}

\PY{k}{while} \PY{p}{(}\PY{n}{multi}\PY{p}{)}\PY{p}{:}
    \PY{n}{teams} \PY{o}{=} \PY{n}{rest\PYZus{}teamsandcoins}\PY{p}{(}\PY{n}{url}\PY{p}{)}
    \PY{n}{names} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n+nb}{list}\PY{p}{(}\PY{n}{teams}\PY{o}{.}\PY{n}{keys}\PY{p}{(}\PY{p}{)}\PY{p}{)}\PY{p}{)}
    \PY{n}{coins} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n+nb}{list}\PY{p}{(}\PY{n}{teams}\PY{o}{.}\PY{n}{values}\PY{p}{(}\PY{p}{)}\PY{p}{)}\PY{p}{)}
    \PY{n+nb}{print}\PY{p}{(}\PY{n}{i}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{names}\PY{p}{[}\PY{n}{np}\PY{o}{.}\PY{n}{where}\PY{p}{(}\PY{n}{names} \PY{o}{==} \PY{n}{ourteam}\PY{p}{)}\PY{p}{]}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{: }\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{coins}\PY{p}{[}\PY{n}{np}\PY{o}{.}\PY{n}{where}\PY{p}{(}\PY{n}{names} \PY{o}{==} \PY{n}{ourteam}\PY{p}{)}\PY{p}{]}\PY{p}{)}
    \PY{n}{availableteams} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{delete}\PY{p}{(}\PY{n}{names}\PY{p}{[}\PY{n}{coins} \PY{o}{\PYZgt{}} \PY{l+m+mi}{100}\PY{p}{]}\PY{p}{,}\PY{n}{np}\PY{o}{.}\PY{n}{where}\PY{p}{(}\PY{n}{names}\PY{p}{[}\PY{n}{coins} \PY{o}{\PYZgt{}} \PY{l+m+mi}{100}\PY{p}{]} \PY{o}{==} \PY{n}{ourteam}\PY{p}{)}\PY{p}{)}
    \PY{k}{for} \PY{n}{enemy} \PY{o+ow}{in} \PY{n}{availableteams}\PY{p}{:}
        \PY{n}{p1} \PY{o}{=} \PY{n}{multiprocessing}\PY{o}{.}\PY{n}{Process}\PY{p}{(}\PY{n}{target}\PY{o}{=}\PY{n}{rest\PYZus{}initiatetransation}\PY{p}{,}\PY{n}{args}\PY{o}{=}\PY{p}{(}\PY{n}{url}\PY{p}{,}\PY{n}{ourteam}\PY{p}{,}\PY{n}{enemy}\PY{p}{)}\PY{p}{)}
        \PY{n}{p1}\PY{o}{.}\PY{n}{start}\PY{p}{(}\PY{p}{)}
    
    \PY{n}{time}\PY{o}{.}\PY{n}{sleep}\PY{p}{(}\PY{l+m+mi}{10}\PY{p}{)}
    \PY{n}{p1}\PY{o}{.}\PY{n}{join}\PY{p}{(}\PY{p}{)}
    \PY{n}{p1}\PY{o}{.}\PY{n}{terminate}\PY{p}{(}\PY{p}{)}
    \PY{n}{p1}\PY{o}{.}\PY{n}{close}\PY{p}{(}\PY{p}{)}
    \PY{n}{rest\PYZus{}claimtransation}\PY{p}{(}\PY{n}{url}\PY{p}{,}\PY{n}{ourteam}\PY{p}{)}
    \PY{n}{i} \PY{o}{=} \PY{n}{i} \PY{o}{+} \PY{l+m+mi}{1}
\end{Verbatim}
\end{tcolorbox}

    \begin{itemize}
\tightlist
\item
  The \textbf{Proof Of Time} block must then be linked to the accounts
  who steals, then a way to bypass the Proof of Time blok would consist
  in making parallelized instances stealing from our team, to the
  others, but using a negative value as quantity of coins stealed. This
  way each parallelized instance is made from a different account. Sadly
  the error
  \texttt{\{"msg":\ "negative\ or\ zero\ values\ are\ forbidden"\}}
  showed up, telling us we can make a transacion of negative or zero
  values
\end{itemize}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{36}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{l+s+sd}{\PYZsq{}\PYZsq{}\PYZsq{}NEGATIVE THEFT IDEA\PYZsq{}\PYZsq{}\PYZsq{}}
\PY{c+c1}{\PYZsh{} this method instead of stealing a certain amount from accounts, makes in parallel instances from all the}
\PY{c+c1}{\PYZsh{} available accounts to ours of a negative amount}
\PY{n}{negamulti} \PY{o}{=} \PY{k+kc}{False}
\PY{n}{i} \PY{o}{=} \PY{l+m+mi}{0}

\PY{k}{while}\PY{p}{(}\PY{n}{negamulti}\PY{p}{)}\PY{p}{:}
    \PY{n}{teams} \PY{o}{=} \PY{n}{rest\PYZus{}teamsandcoins}\PY{p}{(}\PY{n}{url}\PY{p}{)}
    \PY{n}{names} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n+nb}{list}\PY{p}{(}\PY{n}{teams}\PY{o}{.}\PY{n}{keys}\PY{p}{(}\PY{p}{)}\PY{p}{)}\PY{p}{)}
    \PY{n}{coins} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n+nb}{list}\PY{p}{(}\PY{n}{teams}\PY{o}{.}\PY{n}{values}\PY{p}{(}\PY{p}{)}\PY{p}{)}\PY{p}{)}
    \PY{n+nb}{print}\PY{p}{(}\PY{n}{i}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{names}\PY{p}{[}\PY{n}{np}\PY{o}{.}\PY{n}{where}\PY{p}{(}\PY{n}{names} \PY{o}{==} \PY{n}{ourteam}\PY{p}{)}\PY{p}{]}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{: }\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{n}{coins}\PY{p}{[}\PY{n}{np}\PY{o}{.}\PY{n}{where}\PY{p}{(}\PY{n}{names} \PY{o}{==} \PY{n}{ourteam}\PY{p}{)}\PY{p}{]}\PY{p}{)}
    \PY{n}{availableteams} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{delete}\PY{p}{(}\PY{n}{names}\PY{p}{[}\PY{n}{coins} \PY{o}{\PYZgt{}} \PY{l+m+mi}{100}\PY{p}{]}\PY{p}{,}\PY{n}{np}\PY{o}{.}\PY{n}{where}\PY{p}{(}\PY{n}{names}\PY{p}{[}\PY{n}{coins} \PY{o}{\PYZgt{}} \PY{l+m+mi}{100}\PY{p}{]} \PY{o}{==} \PY{n}{ourteam}\PY{p}{)}\PY{p}{)}
    \PY{k}{for} \PY{n}{enemy} \PY{o+ow}{in} \PY{n}{availableteams}\PY{p}{:}
        \PY{n}{p1} \PY{o}{=} \PY{n}{multiprocessing}\PY{o}{.}\PY{n}{Process}\PY{p}{(}\PY{n}{target}\PY{o}{=}\PY{n}{rest\PYZus{}initiatetransation}\PY{p}{,}\PY{n}{args}\PY{o}{=}\PY{p}{(}\PY{n}{url}\PY{p}{,}\PY{n}{enemy}\PY{p}{,}\PY{n}{ourteam}\PY{p}{,}\PY{o}{\PYZhy{}}\PY{l+m+mi}{100}\PY{p}{,}\PY{p}{)}\PY{p}{)}
        \PY{n}{p1}\PY{o}{.}\PY{n}{start}\PY{p}{(}\PY{p}{)}
    \PY{n}{p1}\PY{o}{.}\PY{n}{join}\PY{p}{(}\PY{p}{)}
    \PY{n}{p1}\PY{o}{.}\PY{n}{terminate}\PY{p}{(}\PY{p}{)}
    \PY{n}{p1}\PY{o}{.}\PY{n}{close}\PY{p}{(}\PY{p}{)}
    \PY{n}{i} \PY{o}{=} \PY{n}{i} \PY{o}{+} \PY{l+m+mi}{1}
    \PY{k}{for} \PY{n}{enemy} \PY{o+ow}{in} \PY{n}{availableteams}\PY{p}{:}
        \PY{n}{rest\PYZus{}claimtransation}\PY{p}{(}\PY{n}{url}\PY{p}{,}\PY{n}{enemy}\PY{p}{)}
        \PY{n}{rest\PYZus{}claimtransation}\PY{p}{(}\PY{n}{url}\PY{p}{,}\PY{n}{ourteam}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}


    % Add a bibliography block to the postdoc
    
    
    
\end{document}
